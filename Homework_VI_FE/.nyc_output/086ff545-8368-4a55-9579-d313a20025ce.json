{"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\app.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\app.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":27},"end":{"line":7,"column":90}},"5":{"start":{"line":8,"column":28},"end":{"line":8,"column":93}},"6":{"start":{"line":9,"column":25},"end":{"line":9,"column":85}},"7":{"start":{"line":10,"column":26},"end":{"line":10,"column":83}},"8":{"start":{"line":11,"column":29},"end":{"line":11,"column":89}},"9":{"start":{"line":12,"column":28},"end":{"line":12,"column":87}},"10":{"start":{"line":13,"column":22},"end":{"line":13,"column":80}},"11":{"start":{"line":14,"column":22},"end":{"line":14,"column":80}},"12":{"start":{"line":15,"column":27},"end":{"line":15,"column":95}},"13":{"start":{"line":16,"column":25},"end":{"line":16,"column":89}},"14":{"start":{"line":17,"column":27},"end":{"line":17,"column":95}},"15":{"start":{"line":18,"column":12},"end":{"line":18,"column":36}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":34}},"17":{"start":{"line":20,"column":0},"end":{"line":20,"column":83}},"18":{"start":{"line":21,"column":0},"end":{"line":21,"column":51}},"19":{"start":{"line":22,"column":0},"end":{"line":22,"column":58}},"20":{"start":{"line":23,"column":0},"end":{"line":23,"column":41}},"21":{"start":{"line":24,"column":0},"end":{"line":24,"column":41}},"22":{"start":{"line":25,"column":0},"end":{"line":25,"column":51}},"23":{"start":{"line":26,"column":0},"end":{"line":26,"column":47}},"24":{"start":{"line":27,"column":0},"end":{"line":27,"column":51}},"25":{"start":{"line":28,"column":0},"end":{"line":28,"column":43}},"26":{"start":{"line":29,"column":0},"end":{"line":29,"column":35}},"27":{"start":{"line":30,"column":0},"end":{"line":30,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":12,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1},"f":{"0":12},"b":{"0":[1,1,1],"1":[11,1],"2":[12,12]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/app.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/app.ts"],"names":[],"mappings":";;;;;AAAA,sDAA6B;AAE7B,2FAAkE;AAClE,8FAAqE;AACrE,sFAA8D;AAE9D,oFAA4D;AAC5D,0FAAkE;AAClE,wFAAqD;AAErD,iFAAyD;AACzD,iFAAyD;AACzD,gGAAwE;AACxE,0FAAkE;AAClE,gGAAwE;AAExE,MAAM,GAAG,GAAG,IAAA,iBAAO,GAAE,CAAA;AAErB,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,IAAI,EAAE,CAAC,CAAC;AAExB,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,2BAAM,EAAE,2BAAiB,CAAC,OAAO,CAAC,CAAC;AAEpD,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,wBAAe,CAAC,KAAK,CAAC,CAAC;AAC1C,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,0BAAgB,CAAC,UAAU,CAAC,CAAC;AAEhD,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,qBAAW,CAAC,CAAC;AAC/B,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,qBAAW,CAAC,CAAC;AAC/B,GAAG,CAAC,GAAG,CAAC,aAAa,EAAE,0BAAgB,CAAC,CAAC;AACzC,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,wBAAc,CAAC,CAAC;AACrC,GAAG,CAAC,GAAG,CAAC,aAAa,EAAE,0BAAgB,CAAC,CAAC;AAEzC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,4BAAkB,CAAC,CAAC;AAEjC,GAAG,CAAC,GAAG,CAAC,yBAAe,CAAC,CAAC;AAEzB,kBAAe,GAAG,CAAC","sourcesContent":["import express from 'express'\r\n\r\nimport usersControllers from './components/users/usersControllers'\r\nimport loggerControllers from './components/logger/loggerControllers'\r\nimport authControllers from './components/auth/authController'\r\n\r\nimport errorMiddleware from './middlewares/errorMiddleware';\r\nimport notFoundMiddleware from './middlewares/notFoundMiddleware';\r\nimport logger from './middlewares/loggingMiddleware';\r\n\r\nimport usersRoutes from './components/users/usersRoutes';\r\nimport tasksRoutes from './components/tasks/tasksRoutes';\r\nimport categoriesRoutes from './components/categories/categoriesRoutes';\r\nimport subtasksRoutes from './components/subtasks/subtasksRoutes';\r\nimport prioritiesRoutes from './components/priorities/prioritiesRoutes';\r\n\r\nconst app = express()\r\n\r\napp.use(express.json());\r\n\r\napp.get('/logs', logger, loggerControllers.getLogs);\r\n\r\napp.post('/login', authControllers.login);\r\napp.post('/users', usersControllers.createUser);\r\n\r\napp.use('/users', usersRoutes);\r\napp.use('/tasks', tasksRoutes);\r\napp.use('/categories', categoriesRoutes);\r\napp.use('/subtasks', subtasksRoutes);\r\napp.use('/priorities', prioritiesRoutes);\r\n\r\napp.use('*', notFoundMiddleware);\r\n\r\napp.use(errorMiddleware);\r\n\r\nexport default app;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"08b06cb52afae6082f555f101d2cb44f504ef24e","contentHash":"0c544609c1b292df4deab4b967625fe47ddf65fe09e4c6c951b15102c7cbc496"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\users\\usersControllers.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\users\\usersControllers.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":67}},"16":{"start":{"line":16,"column":22},"end":{"line":16,"column":72}},"17":{"start":{"line":17,"column":23},"end":{"line":17,"column":74}},"18":{"start":{"line":18,"column":25},"end":{"line":97,"column":1}},"19":{"start":{"line":19,"column":34},"end":{"line":36,"column":6}},"20":{"start":{"line":20,"column":22},"end":{"line":20,"column":62}},"21":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"22":{"start":{"line":22,"column":12},"end":{"line":22,"column":31}},"23":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"24":{"start":{"line":25,"column":12},"end":{"line":25,"column":75}},"25":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"26":{"start":{"line":28,"column":12},"end":{"line":28,"column":60}},"27":{"start":{"line":30,"column":8},"end":{"line":35,"column":11}},"28":{"start":{"line":37,"column":37},"end":{"line":48,"column":6}},"29":{"start":{"line":38,"column":19},"end":{"line":38,"column":40}},"30":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"31":{"start":{"line":40,"column":12},"end":{"line":40,"column":60}},"32":{"start":{"line":42,"column":21},"end":{"line":42,"column":66}},"33":{"start":{"line":43,"column":8},"end":{"line":47,"column":11}},"34":{"start":{"line":49,"column":36},"end":{"line":66,"column":6}},"35":{"start":{"line":50,"column":57},"end":{"line":50,"column":65}},"36":{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},"37":{"start":{"line":52,"column":12},"end":{"line":52,"column":123}},"38":{"start":{"line":54,"column":24},"end":{"line":59,"column":9}},"39":{"start":{"line":60,"column":23},"end":{"line":60,"column":72}},"40":{"start":{"line":61,"column":8},"end":{"line":65,"column":11}},"41":{"start":{"line":67,"column":36},"end":{"line":83,"column":6}},"42":{"start":{"line":68,"column":19},"end":{"line":68,"column":40}},"43":{"start":{"line":69,"column":30},"end":{"line":69,"column":38}},"44":{"start":{"line":70,"column":23},"end":{"line":70,"column":68}},"45":{"start":{"line":71,"column":8},"end":{"line":73,"column":9}},"46":{"start":{"line":72,"column":12},"end":{"line":72,"column":60}},"47":{"start":{"line":74,"column":28},"end":{"line":74,"column":87}},"48":{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},"49":{"start":{"line":76,"column":12},"end":{"line":76,"column":123}},"50":{"start":{"line":78,"column":8},"end":{"line":82,"column":11}},"51":{"start":{"line":84,"column":36},"end":{"line":96,"column":6}},"52":{"start":{"line":85,"column":19},"end":{"line":85,"column":40}},"53":{"start":{"line":86,"column":23},"end":{"line":86,"column":68}},"54":{"start":{"line":87,"column":8},"end":{"line":89,"column":9}},"55":{"start":{"line":88,"column":12},"end":{"line":88,"column":53}},"56":{"start":{"line":90,"column":28},"end":{"line":90,"column":72}},"57":{"start":{"line":91,"column":8},"end":{"line":95,"column":11}},"58":{"start":{"line":98,"column":0},"end":{"line":98,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":14},"end":{"line":19,"column":15}},"loc":{"start":{"line":19,"column":34},"end":{"line":36,"column":6}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":68},"end":{"line":19,"column":69}},"loc":{"start":{"line":19,"column":81},"end":{"line":36,"column":5}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":37,"column":17},"end":{"line":37,"column":18}},"loc":{"start":{"line":37,"column":37},"end":{"line":48,"column":6}},"line":37},"11":{"name":"(anonymous_11)","decl":{"start":{"line":37,"column":71},"end":{"line":37,"column":72}},"loc":{"start":{"line":37,"column":84},"end":{"line":48,"column":5}},"line":37},"12":{"name":"(anonymous_12)","decl":{"start":{"line":49,"column":16},"end":{"line":49,"column":17}},"loc":{"start":{"line":49,"column":36},"end":{"line":66,"column":6}},"line":49},"13":{"name":"(anonymous_13)","decl":{"start":{"line":49,"column":70},"end":{"line":49,"column":71}},"loc":{"start":{"line":49,"column":83},"end":{"line":66,"column":5}},"line":49},"14":{"name":"(anonymous_14)","decl":{"start":{"line":67,"column":16},"end":{"line":67,"column":17}},"loc":{"start":{"line":67,"column":36},"end":{"line":83,"column":6}},"line":67},"15":{"name":"(anonymous_15)","decl":{"start":{"line":67,"column":70},"end":{"line":67,"column":71}},"loc":{"start":{"line":67,"column":83},"end":{"line":83,"column":5}},"line":67},"16":{"name":"(anonymous_16)","decl":{"start":{"line":84,"column":16},"end":{"line":84,"column":17}},"loc":{"start":{"line":84,"column":36},"end":{"line":96,"column":6}},"line":84},"17":{"name":"(anonymous_17)","decl":{"start":{"line":84,"column":70},"end":{"line":84,"column":71}},"loc":{"start":{"line":84,"column":83},"end":{"line":96,"column":5}},"line":84}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},{"start":{"line":21,"column":8},"end":{"line":23,"column":9}}],"line":21},"9":{"loc":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},{"start":{"line":24,"column":8},"end":{"line":26,"column":9}}],"line":24},"10":{"loc":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},{"start":{"line":27,"column":8},"end":{"line":29,"column":9}}],"line":27},"11":{"loc":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},{"start":{"line":39,"column":8},"end":{"line":41,"column":9}}],"line":39},"12":{"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":73}},"type":"binary-expr","locations":[{"start":{"line":39,"column":12},"end":{"line":39,"column":37}},{"start":{"line":39,"column":41},"end":{"line":39,"column":73}}],"line":39},"13":{"loc":{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},{"start":{"line":51,"column":8},"end":{"line":53,"column":9}}],"line":51},"14":{"loc":{"start":{"line":51,"column":12},"end":{"line":51,"column":58}},"type":"binary-expr","locations":[{"start":{"line":51,"column":12},"end":{"line":51,"column":22}},{"start":{"line":51,"column":26},"end":{"line":51,"column":35}},{"start":{"line":51,"column":39},"end":{"line":51,"column":45}},{"start":{"line":51,"column":49},"end":{"line":51,"column":58}}],"line":51},"15":{"loc":{"start":{"line":71,"column":8},"end":{"line":73,"column":9}},"type":"if","locations":[{"start":{"line":71,"column":8},"end":{"line":73,"column":9}},{"start":{"line":71,"column":8},"end":{"line":73,"column":9}}],"line":71},"16":{"loc":{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},{"start":{"line":75,"column":8},"end":{"line":77,"column":9}}],"line":75},"17":{"loc":{"start":{"line":87,"column":8},"end":{"line":89,"column":9}},"type":"if","locations":[{"start":{"line":87,"column":8},"end":{"line":89,"column":9}},{"start":{"line":87,"column":8},"end":{"line":89,"column":9}}],"line":87}},"s":{"0":1,"1":2,"2":0,"3":2,"4":2,"5":2,"6":0,"7":0,"8":0,"9":0,"10":4,"11":2,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":1,"24":0,"25":1,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":1,"36":1,"37":0,"38":1,"39":1,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1},"f":{"0":2,"1":2,"2":0,"3":2,"4":2,"5":0,"6":4,"7":3,"8":1,"9":1,"10":0,"11":0,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2],"3":[2,2],"4":[2,2],"5":[1,1,1],"6":[3,0],"7":[3,3],"8":[0,1],"9":[0,1],"10":[0,1],"11":[0,0],"12":[0,0],"13":[0,1],"14":[1,1,1,1],"15":[0,0],"16":[0,0],"17":[0,0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/users/usersControllers.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/users/usersControllers.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\nimport usersServices from './usersServices';\r\nimport CustomError from '../helpers/CustomError';\r\nimport errorFactory from '../helpers/errorFactory';\r\n\r\nconst usersControllers = {\r\n  getUsers: async (req: Request, res: Response, next: NextFunction) => {\r\n    const users = await usersServices.getUsers();\r\n    if (users instanceof CustomError) {\r\n      return next(users);\r\n    }\r\n    if (users.length === 0) {\r\n      return next(errorFactory.notFound('No users found'));\r\n    }\r\n    if (res.locals.user.role !== 'Admin') {\r\n      return next(errorFactory.forbidden());\r\n    }\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'List of users',\r\n      users,\r\n      countOfUsers: users.length,\r\n    });\r\n  },\r\n  getUserById: async (req: Request, res: Response, next: NextFunction) => {\r\n    const id = Number(req.params.id);\r\n\r\n    if (id !== res.locals.user.id && res.locals.user.role !== 'Admin') {\r\n      return next(errorFactory.forbidden());\r\n    }\r\n\r\n    const user = await usersServices.getUserById(id);\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'User',\r\n      user,\r\n    });\r\n\r\n  },\r\n  createUser: async (req: Request, res: Response, next: NextFunction) => {\r\n    const { firstName, lastName, email, password } = req.body;\r\n\r\n    if (!firstName || !lastName || !email || !password) {\r\n      return next(errorFactory.badRequest('Check if firstName, lastName, email or password are provided'));\r\n    }\r\n\r\n    const newUser = {\r\n      firstName, \r\n      lastName, \r\n      email, \r\n      password\r\n    }\r\n\r\n    const userId = await usersServices.createUser(newUser);\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'User created',\r\n      userId,\r\n    });\r\n\r\n  },\r\n  updateUser: async (req: Request, res: Response, next: NextFunction) => {\r\n    const id = Number(req.params.id);\r\n    const updatedFields = req.body;\r\n    const userId = await usersServices.getUserById(id);\r\n\r\n    if( userId.id !== res.locals.user.id) {\r\n      return next(errorFactory.forbidden());\r\n    }\r\n\r\n    const updatedRows = await usersServices.updateUser(id, updatedFields);\r\n\r\n    if (updatedRows === 0) {\r\n      return next(errorFactory.badRequest('Check if firstName, lastName, email or password are provided'));\r\n    }\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'User updated',\r\n      updatedRows,\r\n    });\r\n  },\r\n  deleteUser: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id);\r\n    const userId = await usersServices.getUserById(id);\r\n\r\n    if( userId.id !== res.locals.user.id) {\r\n      next(errorFactory.forbidden());\r\n    }\r\n    \r\n    const deletedRows = await usersServices.deleteUser(id);\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'User deleted',\r\n      deletedRows,\r\n    });\r\n  }\r\n};\r\n\r\nexport default usersControllers;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f02acc0977b0efabf78d56bf83e785e9e4716477","contentHash":"5db797e61af80b440ffcc6cfcde686c09fe8757dbcda2c0ae33171435a2442b5"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\users\\usersServices.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\users\\usersServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":23},"end":{"line":15,"column":74}},"16":{"start":{"line":16,"column":19},"end":{"line":16,"column":61}},"17":{"start":{"line":17,"column":22},"end":{"line":17,"column":72}},"18":{"start":{"line":18,"column":22},"end":{"line":76,"column":1}},"19":{"start":{"line":19,"column":20},"end":{"line":28,"column":6}},"20":{"start":{"line":20,"column":8},"end":{"line":27,"column":9}},"21":{"start":{"line":21,"column":28},"end":{"line":21,"column":117}},"22":{"start":{"line":22,"column":12},"end":{"line":22,"column":25}},"23":{"start":{"line":25,"column":12},"end":{"line":25,"column":31}},"24":{"start":{"line":26,"column":12},"end":{"line":26,"column":65}},"25":{"start":{"line":29,"column":25},"end":{"line":32,"column":6}},"26":{"start":{"line":30,"column":23},"end":{"line":30,"column":131}},"27":{"start":{"line":31,"column":8},"end":{"line":31,"column":23}},"28":{"start":{"line":33,"column":31},"end":{"line":36,"column":6}},"29":{"start":{"line":34,"column":23},"end":{"line":34,"column":126}},"30":{"start":{"line":35,"column":8},"end":{"line":35,"column":23}},"31":{"start":{"line":37,"column":29},"end":{"line":48,"column":6}},"32":{"start":{"line":38,"column":31},"end":{"line":38,"column":90}},"33":{"start":{"line":39,"column":21},"end":{"line":45,"column":9}},"34":{"start":{"line":46,"column":25},"end":{"line":46,"column":91}},"35":{"start":{"line":47,"column":8},"end":{"line":47,"column":31}},"36":{"start":{"line":49,"column":39},"end":{"line":71,"column":6}},"37":{"start":{"line":50,"column":28},"end":{"line":50,"column":30}},"38":{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},"39":{"start":{"line":52,"column":12},"end":{"line":52,"column":60}},"40":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"41":{"start":{"line":55,"column":12},"end":{"line":55,"column":58}},"42":{"start":{"line":57,"column":8},"end":{"line":59,"column":9}},"43":{"start":{"line":58,"column":12},"end":{"line":58,"column":52}},"44":{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},"45":{"start":{"line":61,"column":12},"end":{"line":61,"column":101}},"46":{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},"47":{"start":{"line":64,"column":12},"end":{"line":64,"column":50}},"48":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"49":{"start":{"line":67,"column":12},"end":{"line":67,"column":21}},"50":{"start":{"line":69,"column":25},"end":{"line":69,"column":110}},"51":{"start":{"line":70,"column":8},"end":{"line":70,"column":35}},"52":{"start":{"line":72,"column":24},"end":{"line":75,"column":6}},"53":{"start":{"line":73,"column":25},"end":{"line":73,"column":115}},"54":{"start":{"line":74,"column":8},"end":{"line":74,"column":35}},"55":{"start":{"line":77,"column":0},"end":{"line":77,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":14},"end":{"line":19,"column":15}},"loc":{"start":{"line":19,"column":20},"end":{"line":28,"column":6}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":54},"end":{"line":19,"column":55}},"loc":{"start":{"line":19,"column":67},"end":{"line":28,"column":5}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":18}},"loc":{"start":{"line":29,"column":25},"end":{"line":32,"column":6}},"line":29},"11":{"name":"(anonymous_11)","decl":{"start":{"line":29,"column":59},"end":{"line":29,"column":60}},"loc":{"start":{"line":29,"column":72},"end":{"line":32,"column":5}},"line":29},"12":{"name":"(anonymous_12)","decl":{"start":{"line":33,"column":20},"end":{"line":33,"column":21}},"loc":{"start":{"line":33,"column":31},"end":{"line":36,"column":6}},"line":33},"13":{"name":"(anonymous_13)","decl":{"start":{"line":33,"column":65},"end":{"line":33,"column":66}},"loc":{"start":{"line":33,"column":78},"end":{"line":36,"column":5}},"line":33},"14":{"name":"(anonymous_14)","decl":{"start":{"line":37,"column":16},"end":{"line":37,"column":17}},"loc":{"start":{"line":37,"column":29},"end":{"line":48,"column":6}},"line":37},"15":{"name":"(anonymous_15)","decl":{"start":{"line":37,"column":63},"end":{"line":37,"column":64}},"loc":{"start":{"line":37,"column":76},"end":{"line":48,"column":5}},"line":37},"16":{"name":"(anonymous_16)","decl":{"start":{"line":49,"column":16},"end":{"line":49,"column":17}},"loc":{"start":{"line":49,"column":39},"end":{"line":71,"column":6}},"line":49},"17":{"name":"(anonymous_17)","decl":{"start":{"line":49,"column":73},"end":{"line":49,"column":74}},"loc":{"start":{"line":49,"column":86},"end":{"line":71,"column":5}},"line":49},"18":{"name":"(anonymous_18)","decl":{"start":{"line":72,"column":16},"end":{"line":72,"column":17}},"loc":{"start":{"line":72,"column":24},"end":{"line":75,"column":6}},"line":72},"19":{"name":"(anonymous_19)","decl":{"start":{"line":72,"column":58},"end":{"line":72,"column":59}},"loc":{"start":{"line":72,"column":71},"end":{"line":75,"column":5}},"line":72}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},{"start":{"line":51,"column":8},"end":{"line":53,"column":9}}],"line":51},"9":{"loc":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},{"start":{"line":54,"column":8},"end":{"line":56,"column":9}}],"line":54},"10":{"loc":{"start":{"line":57,"column":8},"end":{"line":59,"column":9}},"type":"if","locations":[{"start":{"line":57,"column":8},"end":{"line":59,"column":9}},{"start":{"line":57,"column":8},"end":{"line":59,"column":9}}],"line":57},"11":{"loc":{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},"type":"if","locations":[{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},{"start":{"line":60,"column":8},"end":{"line":62,"column":9}}],"line":60},"12":{"loc":{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},{"start":{"line":63,"column":8},"end":{"line":65,"column":9}}],"line":63},"13":{"loc":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},{"start":{"line":66,"column":8},"end":{"line":68,"column":9}}],"line":66}},"s":{"0":1,"1":13,"2":0,"3":12,"4":13,"5":13,"6":0,"7":0,"8":0,"9":0,"10":25,"11":12,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":10,"29":10,"30":10,"31":1,"32":1,"33":1,"34":1,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1},"f":{"0":12,"1":13,"2":0,"3":12,"4":13,"5":0,"6":25,"7":3,"8":1,"9":1,"10":0,"11":0,"12":10,"13":10,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[13,0],"2":[12,12],"3":[12,13],"4":[12,12],"5":[1,1,1],"6":[3,0],"7":[3,3],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/users/usersServices.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/users/usersServices.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,2EAAmD;AACnD,8DAAsC;AAEtC,yEAAiD;AAEjD,MAAM,aAAa,GAAG;IACpB,QAAQ,EAAE,GAAyC,EAAE;QACnD,IAAI;YACF,MAAM,CAAC,KAAK,CAAC,GAA6B,MAAM,kBAAQ,CAAC,KAAK,CAAC,yDAAyD,CAAC,CAAC;YAC1H,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAU,EAAE;YACnB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,OAAO,IAAI,qBAAW,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;SAC5C;IACH,CAAC,CAAA;IACD,WAAW,EAAE,CAAO,EAAU,EAAmB,EAAE;QACjD,MAAM,CAAC,IAAI,CAAC,GAA6B,MAAM,kBAAQ,CAAC,KAAK,CAAC,sEAAsE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC5I,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,KAAa,EAA8B,EAAE;QAClE,MAAM,CAAC,IAAI,CAAC,GAA6B,MAAM,kBAAQ,CAAC,KAAK,CAAC,8DAA8D,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;QACvI,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,CAAA;IACD,UAAU,EAAE,CAAO,OAAiB,EAAE,EAAE;QACtC,MAAM,cAAc,GAAI,MAAM,sBAAY,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAC1E,MAAM,IAAI,GAAG;YACX,SAAS,EAAE,OAAO,CAAC,SAAS;YAC5B,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,KAAK,EAAE,OAAO,CAAC,KAAK;YACpB,QAAQ,EAAE,cAAc;YACxB,IAAI,EAAE,MAAM;SACb,CAAC;QACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAQ,CAAC,KAAK,CAAC,0BAA0B,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;QAC5G,OAAO,MAAM,CAAC,QAAQ,CAAC;IACzB,CAAC,CAAA;IACD,UAAU,EAAE,CAAO,EAAU,EAAE,aAA6B,EAAE,EAAE;QAC9D,MAAM,WAAW,GAAmB,EAAE,CAAC;QAEvC,IAAI,aAAa,CAAC,SAAS,KAAK,SAAS,EAAE;YACzC,WAAW,CAAC,SAAS,GAAG,aAAa,CAAC,SAAS,CAAC;SACjD;QACD,IAAI,aAAa,CAAC,QAAQ,KAAK,SAAS,EAAE;YACxC,WAAW,CAAC,QAAQ,GAAG,aAAa,CAAC,QAAQ,CAAC;SAC/C;QACD,IAAI,aAAa,CAAC,KAAK,KAAK,SAAS,EAAE;YACrC,WAAW,CAAC,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC;SACzC;QACD,IAAI,aAAa,CAAC,QAAQ,KAAK,SAAS,EAAE;YACxC,WAAW,CAAC,QAAQ,GAAG,MAAM,sBAAY,CAAC,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;SAChF;QACD,IAAI,aAAa,CAAC,IAAI,KAAK,SAAS,EAAE;YACpC,WAAW,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC;SACvC;QAED,IAAI,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;YACzC,OAAO,CAAC,CAAC;SACV;QAED,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAQ,CAAC,KAAK,CAAC,kCAAkC,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC;QAE/H,OAAO,MAAM,CAAC,YAAY,CAAC;IAC7B,CAAC,CAAA;IACD,UAAU,EAAE,CAAO,EAAU,EAAE,EAAE;QAC/B,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAQ,CAAC,KAAK,CAAC,oDAAoD,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACpI,OAAO,MAAM,CAAC,YAAY,CAAC;IAC7B,CAAC,CAAA;CACF,CAAC;AAEF,kBAAe,aAAa,CAAC","sourcesContent":["import { IUser, INewUser } from './usersModels';\r\nimport hashServices from '../helpers/hashServices';\r\nimport database from '../../database';\r\nimport { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport CustomError from '../helpers/CustomError';\r\n\r\nconst usersServices = {\r\n  getUsers: async (): Promise<IUser[] | CustomError> => {\r\n    try {\r\n      const [users]: [IUser[], FieldPacket[]] = await database.query('SELECT id, firstName, lastName, email, role FROM users;');\r\n      return users;\r\n    } catch (error: any) {\r\n      console.log(error);\r\n      return new CustomError(error.message, 500);\r\n    }\r\n  },\r\n  getUserById: async (id: number): Promise<IUser>  => {\r\n    const [user]: [IUser[], FieldPacket[]] = await database.query('SELECT id, firstName, lastName, email, role FROM users WHERE id = ?;', [id]);\r\n    return user[0];\r\n  },\r\n  getUserByEmail: async (email: string): Promise<IUser | undefined> => {\r\n    const [user]: [IUser[], FieldPacket[]] = await database.query('SELECT * FROM users WHERE email = ? AND deletedDate IS NULL;', [email]);\r\n    return user[0];\r\n  },\r\n  createUser: async (newUser: INewUser) => {\r\n    const hashedPassword =  await hashServices.hashPassword(newUser.password);\r\n    const user = {\r\n      firstName: newUser.firstName,\r\n      lastName: newUser.lastName,\r\n      email: newUser.email,\r\n      password: hashedPassword,\r\n      role: 'User',\r\n    };\r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await database.query('INSERT INTO users SET ?;', [user]);\r\n    return result.insertId;\r\n  },\r\n  updateUser: async (id: number, updatedFields: Partial<IUser>) => {\r\n    const validFields: Partial<IUser> = {};\r\n    \r\n    if (updatedFields.firstName !== undefined) {\r\n      validFields.firstName = updatedFields.firstName;\r\n    }\r\n    if (updatedFields.lastName !== undefined) {\r\n      validFields.lastName = updatedFields.lastName;\r\n    }\r\n    if (updatedFields.email !== undefined) {\r\n      validFields.email = updatedFields.email;\r\n    }\r\n    if (updatedFields.password !== undefined) {\r\n      validFields.password = await hashServices.hashPassword(updatedFields.password);\r\n    }\r\n    if (updatedFields.role !== undefined) {\r\n      validFields.role = updatedFields.role;\r\n    }\r\n\r\n    if (Object.keys(validFields).length === 0) {\r\n      return 0;\r\n    }\r\n  \r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await database.query('UPDATE users SET ? WHERE id = ?;', [validFields, id]);\r\n  \r\n    return result.affectedRows;\r\n  },\r\n  deleteUser: async (id: number) => {\r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await database.query('UPDATE users SET deletedDate = NOW() WHERE id = ?;', [id]);\r\n    return result.affectedRows;\r\n  }\r\n};\r\n\r\nexport default usersServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0ee18d02ac4576a039ad6238b8ca20c9f15e09d2","contentHash":"4bd71a50425c93d6fd124cd8f0f3d47ee4d499e0432087303d47b58ade15e844"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\helpers\\hashServices.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\helpers\\hashServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":17},"end":{"line":15,"column":51}},"16":{"start":{"line":16,"column":17},"end":{"line":16,"column":57}},"17":{"start":{"line":17,"column":21},"end":{"line":24,"column":1}},"18":{"start":{"line":18,"column":32},"end":{"line":20,"column":6}},"19":{"start":{"line":19,"column":8},"end":{"line":19,"column":82}},"20":{"start":{"line":21,"column":42},"end":{"line":23,"column":6}},"21":{"start":{"line":22,"column":8},"end":{"line":22,"column":62}},"22":{"start":{"line":25,"column":0},"end":{"line":25,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":18},"end":{"line":18,"column":19}},"loc":{"start":{"line":18,"column":32},"end":{"line":20,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":66},"end":{"line":18,"column":67}},"loc":{"start":{"line":18,"column":79},"end":{"line":20,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":21,"column":22},"end":{"line":21,"column":23}},"loc":{"start":{"line":21,"column":42},"end":{"line":23,"column":6}},"line":21},"11":{"name":"(anonymous_11)","decl":{"start":{"line":21,"column":76},"end":{"line":21,"column":77}},"loc":{"start":{"line":21,"column":89},"end":{"line":23,"column":5}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":10,"2":0,"3":10,"4":10,"5":10,"6":0,"7":0,"8":0,"9":0,"10":20,"11":10,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":9,"21":9,"22":1},"f":{"0":10,"1":10,"2":0,"3":10,"4":10,"5":0,"6":20,"7":2,"8":1,"9":1,"10":9,"11":9},"b":{"0":[1,1,1],"1":[10,0],"2":[10,10],"3":[10,10],"4":[10,10],"5":[1,1,1],"6":[1,1],"7":[2,2]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/helpers/hashServices.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/helpers/hashServices.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,oDAA4B;AAC5B,0DAAkC;AAElC,MAAM,YAAY,GAAG;IACjB,YAAY,EAAE,CAAO,QAAgB,EAAE,EAAE;QACrC,OAAO,MAAM,gBAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,gBAAM,CAAC,UAAU,CAAC,CAAC;IAC1D,CAAC,CAAA;IACD,gBAAgB,EAAE,CAAO,QAAgB,EAAE,IAAY,EAAE,EAAE;QACvD,OAAO,MAAM,gBAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;IAChD,CAAC,CAAA;CACJ,CAAC;AAEF,kBAAe,YAAY,CAAC","sourcesContent":["import bcrypt from 'bcrypt';\r\nimport config from '../../config';\r\n\r\nconst hashServices = {\r\n    hashPassword: async (password: string) => {\r\n        return await bcrypt.hash(password, config.saltRounds);\r\n    },\r\n    comparePasswords: async (password: string, hash: string) => {\r\n        return await bcrypt.compare(password, hash);\r\n    },\r\n};\r\n\r\nexport default hashServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c9f6a1f0ca8974376a08843ce0e821866c485863","contentHash":"f8bf8c2cea52f891f16fc1f9ca04b39db9a713774b1dde4472ef82de627e97b5"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\config.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\config.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":15},"end":{"line":22,"column":1}},"2":{"start":{"line":23,"column":0},"end":{"line":23,"column":25}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/config.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/config.ts"],"names":[],"mappings":";;AAAA,MAAM,MAAM,GAAG;IACb,IAAI,EAAE,IAAI;IACV,SAAS,EAAE,aAAa;IACxB,YAAY,EAAE,IAAI;IAClB,UAAU,EAAE,EAAE;IACd,EAAE,EAAE;QACF,GAAG,EAAE;YACH,IAAI,EAAE,WAAW;YACjB,IAAI,EAAE,MAAM;YACZ,QAAQ,EAAE,cAAc;YACxB,QAAQ,EAAE,OAAO;SAClB;QACD,IAAI,EAAE;YACJ,IAAI,EAAE,WAAW;YACjB,IAAI,EAAE,MAAM;YACZ,QAAQ,EAAE,cAAc;YACxB,QAAQ,EAAE,QAAQ;SACnB;KACF;CACF,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["const config = {\r\n  port: 3000,\r\n  jwtSecret: 'placeholder',\r\n  jwtExpiresIn: '1h',\r\n  saltRounds: 10,\r\n  db: {\r\n    dev: {\r\n      host: 'localhost',\r\n      user: 'root',\r\n      password: 'my-secret-pw',\r\n      database: 'tasks',\r\n    },\r\n    test: {\r\n      host: 'localhost',\r\n      user: 'root',\r\n      password: 'my-secret-pw',\r\n      database: 'testDB',\r\n    },\r\n  },\r\n};\r\n\r\nexport default config;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6c1d78b081d0facfb592b5ef5ac67119ee370cc8","contentHash":"ece4b67a1ff0c65de4a229761bcab25397462f180c309db5fd04c50af0a03f1f"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\database.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\database.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":51}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":53}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":36}},"6":{"start":{"line":9,"column":11},"end":{"line":9,"column":95}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":21}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":9,"column":54},"end":{"line":9,"column":83}},"type":"binary-expr","locations":[{"start":{"line":9,"column":54},"end":{"line":9,"column":74}},{"start":{"line":9,"column":78},"end":{"line":9,"column":83}}],"line":9}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":2},"b":{"0":[1,1,1],"1":[1,1],"2":[2,2],"3":[1,0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/database.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/database.ts"],"names":[],"mappings":";;;;;AAAA,oDAA4B;AAC5B,sDAA8B;AAW9B,MAAM,QAAQ,GAAe,gBAAM,CAAC,EAAE,CAAC;AAEvC,MAAM,EAAE,GAAG,gBAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,IAAI,KAAK,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;AAEtF,kBAAe,EAAE,CAAC","sourcesContent":["import mysql2 from 'mysql2';\r\nimport config from './config';\r\n\r\ninterface IDBConfig {\r\n  [key: string]: {\r\n      host: string;\r\n      user: string;\r\n      password: string;\r\n      database: string;\r\n  }\r\n}\r\n\r\nconst dbConfig : IDBConfig = config.db;\r\n\r\nconst db = mysql2.createConnection(dbConfig[process.env.NODE_ENV || 'dev']).promise();\r\n\r\nexport default db;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"22b9d957fecb0f9c5a34c3a363270a69ecbf8bd0","contentHash":"7081836a7112c6043bf6371d246c1f6aeb9c0eb75d6655e30c2b6ecfeeae263f"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\helpers\\CustomError.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\helpers\\CustomError.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":23}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":34}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":37}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":37},"end":{"line":8,"column":5}},"line":4}},"branchMap":{},"s":{"0":1,"1":7,"2":7,"3":7,"4":1},"f":{"0":7},"b":{},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/helpers/CustomError.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/helpers/CustomError.ts"],"names":[],"mappings":";;AAAA,MAAM,WAAY,SAAQ,KAAK;IAE7B,YAAY,OAAe,EAAE,UAAkB;QAC3C,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IACnC,CAAC;CACA;AAED,kBAAe,WAAW,CAAC","sourcesContent":["class CustomError extends Error {\r\n  statusCode: number;\r\n  constructor(message: string, statusCode: number) {\r\n      super(message);\r\n      this.name = \"CustomError\";\r\n      this.statusCode = statusCode;\r\n}\r\n}\r\n\r\nexport default CustomError;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"98f5054d6103c71959aed7a7e056f70c9ab83077","contentHash":"e7383e2fb8113eddd784d061fc070b0213def5e04095ee1d9194543c98d59354"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\helpers\\errorFactory.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\helpers\\errorFactory.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":22},"end":{"line":6,"column":63}},"4":{"start":{"line":7,"column":21},"end":{"line":23,"column":1}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":55}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":55}},"7":{"start":{"line":15,"column":8},"end":{"line":15,"column":55}},"8":{"start":{"line":18,"column":8},"end":{"line":18,"column":55}},"9":{"start":{"line":21,"column":8},"end":{"line":21,"column":55}},"10":{"start":{"line":24,"column":0},"end":{"line":24,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":14},"end":{"line":8,"column":15}},"loc":{"start":{"line":8,"column":41},"end":{"line":10,"column":5}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":17},"end":{"line":11,"column":18}},"loc":{"start":{"line":11,"column":47},"end":{"line":13,"column":5}},"line":11},"3":{"name":"(anonymous_3)","decl":{"start":{"line":14,"column":15},"end":{"line":14,"column":16}},"loc":{"start":{"line":14,"column":42},"end":{"line":16,"column":5}},"line":14},"4":{"name":"(anonymous_4)","decl":{"start":{"line":17,"column":16},"end":{"line":17,"column":17}},"loc":{"start":{"line":17,"column":45},"end":{"line":19,"column":5}},"line":17},"5":{"name":"(anonymous_5)","decl":{"start":{"line":20,"column":18},"end":{"line":20,"column":19}},"loc":{"start":{"line":20,"column":48},"end":{"line":22,"column":5}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":8,"column":15},"end":{"line":8,"column":36}},"type":"default-arg","locations":[{"start":{"line":8,"column":25},"end":{"line":8,"column":36}}],"line":8},"4":{"loc":{"start":{"line":11,"column":18},"end":{"line":11,"column":42}},"type":"default-arg","locations":[{"start":{"line":11,"column":28},"end":{"line":11,"column":42}}],"line":11},"5":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":37}},"type":"default-arg","locations":[{"start":{"line":14,"column":26},"end":{"line":14,"column":37}}],"line":14},"6":{"loc":{"start":{"line":17,"column":17},"end":{"line":17,"column":40}},"type":"default-arg","locations":[{"start":{"line":17,"column":27},"end":{"line":17,"column":40}}],"line":17},"7":{"loc":{"start":{"line":20,"column":19},"end":{"line":20,"column":43}},"type":"default-arg","locations":[{"start":{"line":20,"column":29},"end":{"line":20,"column":43}}],"line":20}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":1,"8":5,"9":0,"10":1},"f":{"0":1,"1":1,"2":0,"3":1,"4":5,"5":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0],"4":[0],"5":[1],"6":[3],"7":[0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/helpers/errorFactory.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/helpers/errorFactory.ts"],"names":[],"mappings":";;;;;AAAA,gEAAwC;AAExC,MAAM,YAAY,GAAG;IACjB,QAAQ,EAAE,CAAC,UAAkB,WAAW,EAAE,EAAE;QACxC,OAAO,IAAI,qBAAW,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IACzC,CAAC;IACD,WAAW,EAAE,CAAC,UAAkB,cAAc,EAAE,EAAE;QAC9C,OAAO,IAAI,qBAAW,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IACzC,CAAC;IACD,SAAS,EAAE,CAAC,UAAkB,WAAW,EAAE,EAAE;QACzC,OAAO,IAAI,qBAAW,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IACzC,CAAC;IACD,UAAU,EAAE,CAAC,UAAkB,aAAa,EAAE,EAAE;QAC5C,OAAO,IAAI,qBAAW,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IACzC,CAAC;IACD,YAAY,EAAE,CAAC,UAAkB,cAAc,EAAE,EAAE;QAC/C,OAAO,IAAI,qBAAW,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IACzC,CAAC;CACJ,CAAA;AAED,kBAAe,YAAY,CAAC","sourcesContent":["import CustomError from './CustomError';\r\n\r\nconst errorFactory = {\r\n    notFound: (message: string = 'Not found') => {\r\n        return new CustomError(message, 404);\r\n    },\r\n    serverError: (message: string = 'Server error') => {\r\n        return new CustomError(message, 500);\r\n    },\r\n    forbidden: (message: string = 'Forbidden') => {\r\n        return new CustomError(message, 403);\r\n    },\r\n    badRequest: (message: string = 'Bad request') => {\r\n        return new CustomError(message, 400);\r\n    },\r\n    unauthorized: (message: string = 'Unauthorized') => {\r\n        return new CustomError(message, 401);\r\n    }\r\n}\r\n\r\nexport default errorFactory;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c28d662cd10f71013c7d182a44bdd1d3aa94d84b","contentHash":"3adf037ddbbbfb81f408f8a5166599c4812d8e0edc3e0bcaf589bc534b5295a7"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\logger\\loggerControllers.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\logger\\loggerControllers.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":25},"end":{"line":6,"column":69}},"4":{"start":{"line":7,"column":26},"end":{"line":16,"column":1}},"5":{"start":{"line":9,"column":21},"end":{"line":9,"column":55}},"6":{"start":{"line":10,"column":8},"end":{"line":14,"column":11}},"7":{"start":{"line":17,"column":0},"end":{"line":17,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":13},"end":{"line":8,"column":14}},"loc":{"start":{"line":8,"column":27},"end":{"line":15,"column":5}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/logger/loggerControllers.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/logger/loggerControllers.ts"],"names":[],"mappings":";;;;;AACA,sEAA8C;AAE9C,MAAM,iBAAiB,GAAG;IACxB,OAAO,EAAE,CAAC,GAAY,EAAE,GAAa,EAAE,EAAE;QACvC,MAAM,IAAI,GAAG,wBAAc,CAAC,OAAO,EAAE,CAAC;QACtC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,OAAO,EAAE,IAAI;YACb,OAAO,EAAE,gBAAgB;YACzB,IAAI;SACL,CAAC,CAAC;IACL,CAAC;CACF,CAAC;AAEF,kBAAe,iBAAiB,CAAC","sourcesContent":["import { Response, Request } from 'express';\nimport loggerServices from './loggerServices';\n\nconst loggerControllers = {\n  getLogs: (req: Request, res: Response) => {\n    const logs = loggerServices.getLogs();\n    return res.status(200).json({\n      success: true,\n      message: 'List of events',\n      logs,\n    });\n  },\n};\n\nexport default loggerControllers;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ca70a6515a3425ccd6bfa282548c36e4d8417267","contentHash":"b0ec81a2b24b1ec7382fbb59ed25b5fed4ccaaba528d65d3b0ebbd0cbbea8f0a"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\logger\\loggerServices.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\logger\\loggerServices.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":13},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":23},"end":{"line":9,"column":1}},"3":{"start":{"line":6,"column":8},"end":{"line":6,"column":33}},"4":{"start":{"line":8,"column":19},"end":{"line":8,"column":31}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":14},"end":{"line":5,"column":15}},"loc":{"start":{"line":5,"column":25},"end":{"line":7,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":13},"end":{"line":8,"column":14}},"loc":{"start":{"line":8,"column":19},"end":{"line":8,"column":31}},"line":8}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":1},"f":{"0":0,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/logger/loggerServices.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/logger/loggerServices.ts"],"names":[],"mappings":";;AAAA,iCAA8B;AAE9B,MAAM,cAAc,GAAG;IACrB,QAAQ,EAAE,CAAC,KAAa,EAAE,EAAE;QAC1B,OAAE,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACtB,CAAC;IACD,OAAO,EAAE,GAAG,EAAE,CAAC,OAAE,CAAC,IAAI;CACvB,CAAC;AAEF,kBAAe,cAAc,CAAC","sourcesContent":["import { db } from '../../db';\n\nconst loggerServices = {\n  logEvent: (event: string) => {\n    db.logs.push(event);\n  },\n  getLogs: () => db.logs,\n};\n\nexport default loggerServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5517c81ee885dc2a248bd9a58068dec1d7a98894","contentHash":"a68ce58f6df8b4ec222c352c106e68ead71501be5917cbd0bb8652c10db730a6"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\db.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\db.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":20}},"2":{"start":{"line":4,"column":11},"end":{"line":11,"column":1}},"3":{"start":{"line":12,"column":0},"end":{"line":12,"column":16}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/db.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/db.ts"],"names":[],"mappings":";;;AAeA,MAAM,EAAE,GAAc;IACpB,IAAI,EAAE,EAAE;IACR,KAAK,EAAE,EAAE;IACT,UAAU,EAAE,EAAE;IACd,UAAU,EAAE,EAAE;IACd,QAAQ,EAAE,EAAE;IACZ,KAAK,EAAE,EAAE;CACV,CAAA;AAEO,gBAAE","sourcesContent":["import { IUser } from './components/users/usersModels';\nimport ITask from './components/tasks/tasksModels';\nimport ISubtask from './components/subtasks/subtasksModels';\nimport ICategory from './components/categories/categoriesModels';\nimport IPriority from './components/priorities/prioritiesModels';\n\ninterface IDatabase{\n  logs: string[];\n  users: IUser[];\n  tasks: ITask[];\n  priorities: IPriority[];\n  categories: ICategory[];\n  subtasks: ISubtask[];\n}\n\nconst db: IDatabase = {\n  logs: [],\n  users: [],\n  priorities: [],\n  categories: [],\n  subtasks: [],\n  tasks: []\n}\n\nexport {db};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dea92752e995305e19bf28f6e88fc01bdfe35cf0","contentHash":"c4e3f503fa7a7118d6fc1ee9e216ac9421087a14322995712514b1ffaae986fd"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\auth\\authController.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\auth\\authController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":74}},"16":{"start":{"line":16,"column":23},"end":{"line":16,"column":74}},"17":{"start":{"line":17,"column":22},"end":{"line":17,"column":72}},"18":{"start":{"line":18,"column":23},"end":{"line":18,"column":74}},"19":{"start":{"line":19,"column":24},"end":{"line":44,"column":1}},"20":{"start":{"line":20,"column":31},"end":{"line":43,"column":6}},"21":{"start":{"line":21,"column":36},"end":{"line":21,"column":44}},"22":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"23":{"start":{"line":23,"column":12},"end":{"line":23,"column":102}},"24":{"start":{"line":25,"column":21},"end":{"line":25,"column":72}},"25":{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},"26":{"start":{"line":27,"column":12},"end":{"line":27,"column":75}},"27":{"start":{"line":29,"column":34},"end":{"line":29,"column":104}},"28":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"29":{"start":{"line":31,"column":12},"end":{"line":31,"column":77}},"30":{"start":{"line":33,"column":24},"end":{"line":36,"column":9}},"31":{"start":{"line":37,"column":22},"end":{"line":37,"column":63}},"32":{"start":{"line":38,"column":8},"end":{"line":42,"column":11}},"33":{"start":{"line":45,"column":0},"end":{"line":45,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":11},"end":{"line":20,"column":12}},"loc":{"start":{"line":20,"column":31},"end":{"line":43,"column":6}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":65},"end":{"line":20,"column":66}},"loc":{"start":{"line":20,"column":78},"end":{"line":43,"column":5}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},{"start":{"line":22,"column":8},"end":{"line":24,"column":9}}],"line":22},"9":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":31}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":18}},{"start":{"line":22,"column":22},"end":{"line":22,"column":31}}],"line":22},"10":{"loc":{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},{"start":{"line":26,"column":8},"end":{"line":28,"column":9}}],"line":26},"11":{"loc":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},{"start":{"line":30,"column":8},"end":{"line":32,"column":9}}],"line":30}},"s":{"0":1,"1":27,"2":0,"3":11,"4":27,"5":27,"6":0,"7":0,"8":0,"9":0,"10":38,"11":11,"12":1,"13":4,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":11,"21":11,"22":11,"23":1,"24":10,"25":10,"26":1,"27":9,"28":9,"29":1,"30":8,"31":8,"32":8,"33":1},"f":{"0":11,"1":27,"2":0,"3":11,"4":27,"5":0,"6":38,"7":4,"8":11,"9":11},"b":{"0":[1,1,1],"1":[27,0],"2":[11,11],"3":[11,27],"4":[11,11],"5":[1,1,1],"6":[4,0],"7":[4,4],"8":[1,10],"9":[11,11],"10":[1,9],"11":[1,8]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/auth/authController.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/auth/authController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,2EAAmD;AACnD,2EAAmD;AACnD,yEAAiD;AACjD,2EAAmD;AAEnD,MAAM,eAAe,GAAG;IACtB,KAAK,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,IAAiB,EAAE,EAAE;QAC9D,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QACrC,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,EAAE;YACvB,OAAO,IAAI,CAAC,sBAAY,CAAC,UAAU,CAAC,yCAAyC,CAAC,CAAC,CAAC;SACjF;QACD,MAAM,IAAI,GAAG,MAAM,uBAAa,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;QACvD,IAAI,CAAC,IAAI,EAAE;YACT,OAAO,IAAI,CAAC,sBAAY,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC;SACtD;QACD,MAAM,iBAAiB,GAAG,MAAM,sBAAY,CAAC,gBAAgB,CAC3D,QAAQ,EACR,IAAI,CAAC,QAAS,CACf,CAAC;QACF,IAAI,CAAC,iBAAiB,EAAE;YACtB,OAAO,IAAI,CAAC,sBAAY,CAAC,UAAU,CAAC,gBAAgB,CAAC,CAAC,CAAC;SACxD;QACD,MAAM,OAAO,GAAG;YACd,EAAE,EAAE,IAAI,CAAC,EAAE;YACX,IAAI,EAAE,IAAI,CAAC,IAAI;SAChB,CAAC;QACF,MAAM,KAAK,GAAG,MAAM,qBAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC9C,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,OAAO,EAAE,IAAI;YACb,OAAO,EAAE,gBAAgB;YACzB,KAAK;SACN,CAAC,CAAC;IACL,CAAC,CAAA;CACF,CAAC;AAEF,kBAAe,eAAe,CAAC","sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\nimport usersServices from '../users/usersServices';\r\nimport hashServices from '../helpers/hashServices';\r\nimport jwtServices from '../helpers/jwtServices';\r\nimport errorFactory from '../helpers/errorFactory';\r\n\r\nconst authControllers = {\r\n  login: async (req: Request, res: Response, next:NextFunction) => {\r\n    const { email, password } = req.body;\r\n    if (!email || !password) {\r\n      return next(errorFactory.badRequest('Check if email or password are provided'));\r\n    }\r\n    const user = await usersServices.getUserByEmail(email);\r\n    if (!user) {\r\n      return next(errorFactory.notFound('User not found'));\r\n    }\r\n    const isPasswordCorrect = await hashServices.comparePasswords(\r\n      password,\r\n      user.password!, //hüüumärk on selleks, et tüübikontrollist mööda saada\r\n    );\r\n    if (!isPasswordCorrect) {\r\n      return next(errorFactory.badRequest('Wrong password'));\r\n    }\r\n    const payload = {\r\n      id: user.id,\r\n      role: user.role\r\n    };\r\n    const token = await jwtServices.sign(payload);\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'User logged in',\r\n      token,\r\n    });\r\n  },\r\n};\r\n\r\nexport default authControllers;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"14b84a2412be0f09760eb697b4fde546efebf5e4","contentHash":"b062b38d1050a3fdb8fe26d43ae9be878919a3483063d4c0ff94be2a4b965ff6"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\helpers\\jwtServices.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\helpers\\jwtServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":23},"end":{"line":15,"column":63}},"16":{"start":{"line":16,"column":17},"end":{"line":16,"column":57}},"17":{"start":{"line":17,"column":20},"end":{"line":33,"column":1}},"18":{"start":{"line":18,"column":23},"end":{"line":23,"column":6}},"19":{"start":{"line":19,"column":22},"end":{"line":21,"column":10}},"20":{"start":{"line":22,"column":8},"end":{"line":22,"column":21}},"21":{"start":{"line":25,"column":8},"end":{"line":31,"column":9}},"22":{"start":{"line":26,"column":28},"end":{"line":26,"column":92}},"23":{"start":{"line":27,"column":12},"end":{"line":27,"column":27}},"24":{"start":{"line":30,"column":12},"end":{"line":30,"column":24}},"25":{"start":{"line":34,"column":0},"end":{"line":34,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":10},"end":{"line":18,"column":11}},"loc":{"start":{"line":18,"column":23},"end":{"line":23,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":57},"end":{"line":18,"column":58}},"loc":{"start":{"line":18,"column":70},"end":{"line":23,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":24,"column":12},"end":{"line":24,"column":13}},"loc":{"start":{"line":24,"column":23},"end":{"line":32,"column":5}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":8,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":8,"11":8,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":8,"19":8,"20":8,"21":14,"22":14,"23":13,"24":1,"25":1},"f":{"0":8,"1":0,"2":0,"3":8,"4":0,"5":0,"6":8,"7":2,"8":8,"9":8,"10":14},"b":{"0":[1,1,1],"1":[0,0],"2":[8,8],"3":[8,0],"4":[8,8],"5":[1,1,1],"6":[1,1],"7":[2,2]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/helpers/jwtServices.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/helpers/jwtServices.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,gEAA+B;AAC/B,0DAAkC;AAElC,MAAM,WAAW,GAAG;IAClB,IAAI,EAAE,CAAO,OAAY,EAAmB,EAAE;QAC5C,MAAM,KAAK,GAAG,sBAAG,CAAC,IAAI,CAAC,OAAO,EAAE,gBAAM,CAAC,SAAS,EAAE;YAChD,SAAS,EAAE,gBAAM,CAAC,YAAY;SAC/B,CAAC,CAAC;QACH,OAAO,KAAK,CAAC;IACf,CAAC,CAAA;IACD,MAAM,EAAE,CAAC,KAAa,EAAO,EAAE;QAC7B,IAAI;YACF,MAAM,OAAO,GAAG,sBAAG,CAAC,MAAM,CAAC,KAAK,EAAE,gBAAM,CAAC,SAAS,CAAC,CAAC;YACpD,OAAO,OAAO,CAAC;SAChB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,IAAI,CAAC;SACb;IACH,CAAC;CACF,CAAC;AAEF,kBAAe,WAAW,CAAC","sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport config from '../../config';\r\n\r\nconst jwtServices = {\r\n  sign: async (payload: any): Promise<string> => {\r\n    const token = jwt.sign(payload, config.jwtSecret, {\r\n      expiresIn: config.jwtExpiresIn,\r\n    });\r\n    return token;\r\n  },\r\n  verify: (token: string): any => {\r\n    try {\r\n      const payload = jwt.verify(token, config.jwtSecret);\r\n      return payload;\r\n    } catch (error) {\r\n      return null;\r\n    }\r\n  },\r\n};\r\n\r\nexport default jwtServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1bbfdf7c88eed5f9123f04268d801fbe26462f36","contentHash":"06551c0bc3912337ba71c256ddb972b72313591544cdfec5683311a3754263e3"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\middlewares\\errorMiddleware.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\middlewares\\errorMiddleware.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":24},"end":{"line":8,"column":1}},"2":{"start":{"line":4,"column":4},"end":{"line":7,"column":7}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":24},"end":{"line":3,"column":25}},"loc":{"start":{"line":3,"column":51},"end":{"line":8,"column":1}},"line":3}},"branchMap":{"0":{"loc":{"start":{"line":4,"column":15},"end":{"line":4,"column":38}},"type":"binary-expr","locations":[{"start":{"line":4,"column":15},"end":{"line":4,"column":31}},{"start":{"line":4,"column":35},"end":{"line":4,"column":38}}],"line":4},"1":{"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":48}},"type":"binary-expr","locations":[{"start":{"line":6,"column":17},"end":{"line":6,"column":30}},{"start":{"line":6,"column":34},"end":{"line":6,"column":48}}],"line":6}},"s":{"0":1,"1":1,"2":7,"3":1},"f":{"0":7},"b":{"0":[7,0],"1":[7,0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/middlewares/errorMiddleware.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/middlewares/errorMiddleware.ts"],"names":[],"mappings":";;AAGA,MAAM,eAAe,GAAG,CAAC,KAAkB,EAAE,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IAC5F,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,UAAU,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC;QACrC,OAAO,EAAE,KAAK;QACd,OAAO,EAAE,KAAK,CAAC,OAAO,IAAI,cAAc;KAC3C,CAAC,CAAC;AACP,CAAC,CAAC;AAEF,kBAAe,eAAe,CAAC","sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\nimport CustomError from '../components/helpers/CustomError';\r\n\r\nconst errorMiddleware = (error: CustomError, req: Request, res: Response, next: NextFunction) => {\r\n    res.status(error.statusCode || 500).json({\r\n        success: false,\r\n        message: error.message || 'Server error',\r\n    });\r\n};\r\n\r\nexport default errorMiddleware;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"253d55627b2968324e0bf973d614933126bbb021","contentHash":"e05a21586f58cb7906b83e48fb39f7978be98beab0fb8cc7aa6645b4db727d0c"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\middlewares\\notFoundMiddleware.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\middlewares\\notFoundMiddleware.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":23},"end":{"line":6,"column":85}},"4":{"start":{"line":7,"column":27},"end":{"line":9,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":68}},"6":{"start":{"line":10,"column":0},"end":{"line":10,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":27},"end":{"line":7,"column":28}},"loc":{"start":{"line":7,"column":47},"end":{"line":9,"column":1}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/middlewares/notFoundMiddleware.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/middlewares/notFoundMiddleware.ts"],"names":[],"mappings":";;;;;AACA,sFAA8D;AAE9D,MAAM,kBAAkB,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IAC3E,OAAO,IAAI,CAAC,sBAAY,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC,CAAC;AAC1D,CAAC,CAAC;AAEF,kBAAe,kBAAkB,CAAC","sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\nimport errorFactory from '../components/helpers/errorFactory';\r\n\r\nconst notFoundMiddleware = (req: Request, res: Response, next: NextFunction) => {\r\n    return next(errorFactory.notFound('Route not found'));\r\n};\r\n\r\nexport default notFoundMiddleware;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"56f2482ed3c722bca42643df4259b0a8f3eeb87c","contentHash":"562e382876224409fb31085593e4d9e7a64897d9d7667c1886c9faa66a4bcfa0"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\middlewares\\loggingMiddleware.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\middlewares\\loggingMiddleware.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":25},"end":{"line":6,"column":88}},"4":{"start":{"line":7,"column":15},"end":{"line":11,"column":1}},"5":{"start":{"line":8,"column":18},"end":{"line":8,"column":89}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":45}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":11}},"8":{"start":{"line":12,"column":0},"end":{"line":12,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":15},"end":{"line":7,"column":16}},"loc":{"start":{"line":7,"column":35},"end":{"line":11,"column":1}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/middlewares/loggingMiddleware.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/middlewares/loggingMiddleware.ts"],"names":[],"mappings":";;;;;AACA,yFAAiE;AAEjE,MAAM,MAAM,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IACjE,MAAM,KAAK,GAAG,QAAQ,GAAG,CAAC,GAAG,aAAa,GAAG,CAAC,MAAM,UAAU,IAAI,IAAI,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC;IACtF,wBAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IAC/B,IAAI,EAAE,CAAC;AACT,CAAC,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["import { Request, Response, NextFunction } from 'express';\nimport loggerServices from '../components/logger/loggerServices';\n\nconst logger = (req: Request, res: Response, next: NextFunction) => {\n  const event = `Url: ${req.url}, Meetod: ${req.method}, Aeg: ${new Date().toString()}`;\n  loggerServices.logEvent(event);\n  next();\n};\n\nexport default logger;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e1c724eefce88c640420d20c1b4a440855c67f30","contentHash":"deef8cf043cf2e0ed73895ef867c42f6567841ca96d315882c600e574a200570"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\users\\usersRoutes.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\users\\usersRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":27},"end":{"line":7,"column":73}},"5":{"start":{"line":8,"column":18},"end":{"line":8,"column":71}},"6":{"start":{"line":9,"column":31},"end":{"line":9,"column":97}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":38}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":56}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":43}},"10":{"start":{"line":13,"column":0},"end":{"line":16,"column":59}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"f":{"0":3},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/users/usersRoutes.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/users/usersRoutes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,0EAAkD;AAClD,wEAAgD;AAChD,kGAA0E;AAE1E,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,0BAAgB,CAAC,UAAU,CAAC,CAAA;AAC7C,MAAM,CAAC,GAAG,CAAC,8BAAoB,CAAC,CAAC;AACjC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,iBAAO,EAAE,0BAAgB,CAAC,QAAQ,CAAC;KAChD,GAAG,CAAC,MAAM,EAAE,0BAAgB,CAAC,WAAW,CAAC;KACzC,KAAK,CAAC,MAAM,EAAE,0BAAgB,CAAC,UAAU,CAAC;KAC1C,MAAM,CAAC,MAAM,EAAE,0BAAgB,CAAC,UAAU,CAAC,CAAC;AAE/C,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from \"express\";\r\nimport usersControllers from \"./usersControllers\";\r\nimport isAdmin from \"../../middlewares/isAdmin\";\r\nimport isLoggedInMiddleware from \"../../middlewares/isLoggedInMiddleware\";\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/', usersControllers.createUser)\r\nrouter.use(isLoggedInMiddleware);\r\nrouter.get('/', isAdmin, usersControllers.getUsers)\r\n  .get('/:id', usersControllers.getUserById)\r\n  .patch('/:id', usersControllers.updateUser)\r\n  .delete('/:id', usersControllers.deleteUser);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"31337eb3ea48a92420104bc4b32a848c43756990","contentHash":"007f90c91bf10df923891ad8c09d7c8c12b44264fb0426efd234887d6c1d9ec5"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\middlewares\\isAdmin.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\middlewares\\isAdmin.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":12,"column":1}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":4},"end":{"line":10,"column":5}},"4":{"start":{"line":6,"column":8},"end":{"line":9,"column":11}},"5":{"start":{"line":11,"column":4},"end":{"line":11,"column":18}},"6":{"start":{"line":13,"column":0},"end":{"line":13,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":16},"end":{"line":3,"column":17}},"loc":{"start":{"line":3,"column":36},"end":{"line":12,"column":1}},"line":3}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":4},"end":{"line":10,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":10,"column":5}},{"start":{"line":5,"column":4},"end":{"line":10,"column":5}}],"line":5}},"s":{"0":1,"1":1,"2":4,"3":4,"4":1,"5":3,"6":1},"f":{"0":4},"b":{"0":[1,3]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/middlewares/isAdmin.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/middlewares/isAdmin.ts"],"names":[],"mappings":";;AAEA,MAAM,OAAO,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IAClE,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC;IACjC,IAAI,IAAI,KAAK,OAAO,EAAE;QACpB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,OAAO,EAAE,KAAK;YACd,OAAO,EAAE,WAAW;SACrB,CAAC,CAAC;KACJ;IACD,OAAO,IAAI,EAAE,CAAC;AAChB,CAAC,CAAC;AAEF,kBAAe,OAAO,CAAC","sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\n\r\nconst isAdmin = (req: Request, res: Response, next: NextFunction) => {\r\n  const { role } = res.locals.user;\r\n  if (role !== 'Admin') {\r\n    return res.status(403).json({\r\n      success: false,\r\n      message: 'Forbidden',\r\n    });\r\n  }\r\n  return next();\r\n};\r\n\r\nexport default isAdmin;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"84fdb0989f0843ebbae75b713746c389f3b334fe","contentHash":"db466357211214d6944b85f12498e7e934b18f8d1ce60df29114862af34ba02b"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\middlewares\\isLoggedInMiddleware.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\middlewares\\isLoggedInMiddleware.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":22},"end":{"line":6,"column":83}},"4":{"start":{"line":7,"column":29},"end":{"line":26,"column":1}},"5":{"start":{"line":9,"column":18},"end":{"line":9,"column":104}},"6":{"start":{"line":10,"column":4},"end":{"line":16,"column":5}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":41}},"8":{"start":{"line":12,"column":8},"end":{"line":15,"column":11}},"9":{"start":{"line":17,"column":20},"end":{"line":17,"column":55}},"10":{"start":{"line":18,"column":4},"end":{"line":23,"column":5}},"11":{"start":{"line":19,"column":8},"end":{"line":22,"column":11}},"12":{"start":{"line":24,"column":4},"end":{"line":24,"column":30}},"13":{"start":{"line":25,"column":4},"end":{"line":25,"column":18}},"14":{"start":{"line":27,"column":0},"end":{"line":27,"column":39}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":29},"end":{"line":7,"column":30}},"loc":{"start":{"line":7,"column":49},"end":{"line":26,"column":1}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":9,"column":18},"end":{"line":9,"column":104}},"type":"cond-expr","locations":[{"start":{"line":9,"column":79},"end":{"line":9,"column":85}},{"start":{"line":9,"column":88},"end":{"line":9,"column":104}}],"line":9},"4":{"loc":{"start":{"line":9,"column":18},"end":{"line":9,"column":76}},"type":"binary-expr","locations":[{"start":{"line":9,"column":18},"end":{"line":9,"column":59}},{"start":{"line":9,"column":63},"end":{"line":9,"column":76}}],"line":9},"5":{"loc":{"start":{"line":10,"column":4},"end":{"line":16,"column":5}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":16,"column":5}},{"start":{"line":10,"column":4},"end":{"line":16,"column":5}}],"line":10},"6":{"loc":{"start":{"line":18,"column":4},"end":{"line":23,"column":5}},"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":23,"column":5}},{"start":{"line":18,"column":4},"end":{"line":23,"column":5}}],"line":18}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":15,"6":15,"7":1,"8":1,"9":14,"10":14,"11":1,"12":13,"13":13,"14":1},"f":{"0":1,"1":15},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[1,14],"4":[15,15],"5":[1,14],"6":[1,13]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/middlewares/isLoggedInMiddleware.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/middlewares/isLoggedInMiddleware.ts"],"names":[],"mappings":";;;;;AACA,oFAA4D;AAE5D,MAAM,oBAAoB,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;;IAC/E,MAAM,KAAK,GAAG,MAAA,GAAG,CAAC,OAAO,CAAC,aAAa,0CAAE,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;IACvD,IAAI,CAAC,KAAK,EAAE;QACV,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;QACjC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,OAAO,EAAE,KAAK;YACd,OAAO,EAAE,mBAAmB;SAC7B,CAAC,CAAC;KACJ;IACD,MAAM,OAAO,GAAG,qBAAW,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC1C,IAAI,CAAC,OAAO,EAAE;QACZ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,OAAO,EAAE,KAAK;YACd,OAAO,EAAE,eAAe;SACzB,CAAC,CAAC;KACJ;IACD,GAAG,CAAC,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC;IAC1B,OAAO,IAAI,EAAE,CAAC;AAChB,CAAC,CAAC;AAEF,kBAAe,oBAAoB,CAAC","sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\nimport jwtServices from '../components/helpers/jwtServices';\r\n\r\nconst isLoggedInMiddleware = (req: Request, res: Response, next: NextFunction) => {\r\n  const token = req.headers.authorization?.split(' ')[1];\r\n  if (!token) {\r\n    console.log('No token provided');\r\n    return res.status(401).json({\r\n      success: false,\r\n      message: 'No token provided',\r\n    });\r\n  }\r\n  const payload = jwtServices.verify(token);\r\n  if (!payload) {\r\n    return res.status(401).json({\r\n      success: false,\r\n      message: 'Invalid token',\r\n    });\r\n  }\r\n  res.locals.user = payload;\r\n  return next();\r\n};\r\n\r\nexport default isLoggedInMiddleware;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1131d6403ffb973386a4f0c1bee1c4fe46788f31","contentHash":"86c9c90e4d8f56b454f13971cd9726e38e1dd8be814a097fb2f6aa1c8e53d2ec"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\tasks\\tasksRoutes.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\tasks\\tasksRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":26},"end":{"line":7,"column":71}},"5":{"start":{"line":8,"column":18},"end":{"line":8,"column":71}},"6":{"start":{"line":9,"column":31},"end":{"line":9,"column":97}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":38}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":43}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":71}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":82}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":76}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":64}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":84}},"14":{"start":{"line":17,"column":0},"end":{"line":17,"column":56}},"15":{"start":{"line":18,"column":0},"end":{"line":18,"column":60}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":61}},"17":{"start":{"line":20,"column":0},"end":{"line":20,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1},"f":{"0":3},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/tasks/tasksRoutes.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/tasks/tasksRoutes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,wEAAgD;AAChD,wEAAgD;AAChD,kGAA0E;AAE1E,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,MAAM,CAAC,GAAG,CAAC,8BAAoB,CAAC,CAAC;AACjC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,iBAAO,EAAE,yBAAe,CAAC,QAAQ,CAAC,CAAC;AACnD,MAAM,CAAC,GAAG,CAAC,uBAAuB,EAAE,yBAAe,CAAC,kBAAkB,CAAC,CAAA;AACvE,MAAM,CAAC,GAAG,CAAC,mBAAmB,EAAE,yBAAe,CAAC,gBAAgB,CAAC,CAAC;AAClE,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,yBAAe,CAAC,YAAY,CAAC,CAAC;AACtD,MAAM,CAAC,GAAG,CAAC,wBAAwB,EAAE,yBAAe,CAAC,mBAAmB,CAAC,CAAC;AAC1E,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,yBAAe,CAAC,WAAW,CAAC,CAAC;AAC9C,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE,yBAAe,CAAC,WAAW,CAAC,CAAC;AAClD,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,yBAAe,CAAC,WAAW,CAAC,CAAC;AAEnD,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from \"express\";\r\nimport tasksController from \"./tasksController\";\r\nimport isAdmin from \"../../middlewares/isAdmin\";\r\nimport isLoggedInMiddleware from \"../../middlewares/isLoggedInMiddleware\";\r\n\r\nconst router = Router();\r\n\r\nrouter.use(isLoggedInMiddleware);\r\nrouter.get('/', isAdmin, tasksController.getTasks);\r\nrouter.get('/bypriority/:priority', tasksController.getTasksByPriority)\r\nrouter.get('/byuserid/:userId', tasksController.getTasksByUserId);\r\nrouter.get('/byid/:id', tasksController.getTasksById);\r\nrouter.get('/tasksbyuserid/:userId', tasksController.getTasksIdsByUserId);\r\nrouter.post('/', tasksController.createTasks);\r\nrouter.patch('/:id', tasksController.updateTasks);\r\nrouter.delete('/:id', tasksController.deleteTasks);\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2529fd49837035802bb5e45e64949f90f02b2685","contentHash":"21321bf5ef38c877e0c8449cb84663292443515ebe435d7e3d404419eab0b422"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\tasks\\tasksController.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\tasks\\tasksController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":67}},"16":{"start":{"line":16,"column":22},"end":{"line":16,"column":72}},"17":{"start":{"line":17,"column":23},"end":{"line":17,"column":74}},"18":{"start":{"line":18,"column":24},"end":{"line":142,"column":1}},"19":{"start":{"line":19,"column":34},"end":{"line":30,"column":6}},"20":{"start":{"line":20,"column":25},"end":{"line":20,"column":65}},"21":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"22":{"start":{"line":22,"column":12},"end":{"line":22,"column":34}},"23":{"start":{"line":24,"column":8},"end":{"line":29,"column":11}},"24":{"start":{"line":31,"column":38},"end":{"line":45,"column":6}},"25":{"start":{"line":32,"column":19},"end":{"line":32,"column":40}},"26":{"start":{"line":33,"column":21},"end":{"line":33,"column":67}},"27":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"28":{"start":{"line":35,"column":12},"end":{"line":35,"column":60}},"29":{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},"30":{"start":{"line":38,"column":12},"end":{"line":38,"column":97}},"31":{"start":{"line":40,"column":8},"end":{"line":44,"column":11}},"32":{"start":{"line":46,"column":42},"end":{"line":60,"column":6}},"33":{"start":{"line":47,"column":23},"end":{"line":47,"column":48}},"34":{"start":{"line":48,"column":22},"end":{"line":48,"column":76}},"35":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"36":{"start":{"line":50,"column":12},"end":{"line":50,"column":60}},"37":{"start":{"line":52,"column":8},"end":{"line":54,"column":9}},"38":{"start":{"line":53,"column":12},"end":{"line":53,"column":103}},"39":{"start":{"line":55,"column":8},"end":{"line":59,"column":11}},"40":{"start":{"line":61,"column":45},"end":{"line":75,"column":6}},"41":{"start":{"line":62,"column":23},"end":{"line":62,"column":48}},"42":{"start":{"line":63,"column":24},"end":{"line":63,"column":81}},"43":{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},"44":{"start":{"line":65,"column":12},"end":{"line":65,"column":60}},"45":{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},"46":{"start":{"line":68,"column":12},"end":{"line":68,"column":103}},"47":{"start":{"line":70,"column":8},"end":{"line":74,"column":11}},"48":{"start":{"line":76,"column":44},"end":{"line":88,"column":6}},"49":{"start":{"line":77,"column":25},"end":{"line":77,"column":52}},"50":{"start":{"line":78,"column":23},"end":{"line":78,"column":41}},"51":{"start":{"line":79,"column":22},"end":{"line":79,"column":88}},"52":{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},"53":{"start":{"line":81,"column":12},"end":{"line":81,"column":104}},"54":{"start":{"line":83,"column":8},"end":{"line":87,"column":11}},"55":{"start":{"line":89,"column":37},"end":{"line":100,"column":6}},"56":{"start":{"line":90,"column":72},"end":{"line":90,"column":80}},"57":{"start":{"line":91,"column":8},"end":{"line":93,"column":9}},"58":{"start":{"line":92,"column":12},"end":{"line":92,"column":89}},"59":{"start":{"line":94,"column":23},"end":{"line":94,"column":136}},"60":{"start":{"line":95,"column":8},"end":{"line":99,"column":11}},"61":{"start":{"line":101,"column":37},"end":{"line":127,"column":6}},"62":{"start":{"line":102,"column":19},"end":{"line":102,"column":40}},"63":{"start":{"line":103,"column":72},"end":{"line":103,"column":80}},"64":{"start":{"line":104,"column":22},"end":{"line":104,"column":68}},"65":{"start":{"line":105,"column":23},"end":{"line":105,"column":81}},"66":{"start":{"line":106,"column":8},"end":{"line":108,"column":9}},"67":{"start":{"line":107,"column":12},"end":{"line":107,"column":60}},"68":{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},"69":{"start":{"line":110,"column":12},"end":{"line":110,"column":89}},"70":{"start":{"line":112,"column":29},"end":{"line":118,"column":9}},"71":{"start":{"line":119,"column":28},"end":{"line":119,"column":86}},"72":{"start":{"line":120,"column":8},"end":{"line":122,"column":9}},"73":{"start":{"line":121,"column":12},"end":{"line":121,"column":59}},"74":{"start":{"line":123,"column":8},"end":{"line":126,"column":11}},"75":{"start":{"line":128,"column":37},"end":{"line":141,"column":6}},"76":{"start":{"line":129,"column":19},"end":{"line":129,"column":40}},"77":{"start":{"line":130,"column":8},"end":{"line":132,"column":9}},"78":{"start":{"line":131,"column":12},"end":{"line":131,"column":60}},"79":{"start":{"line":133,"column":29},"end":{"line":133,"column":73}},"80":{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},"81":{"start":{"line":135,"column":12},"end":{"line":135,"column":59}},"82":{"start":{"line":137,"column":8},"end":{"line":140,"column":11}},"83":{"start":{"line":143,"column":0},"end":{"line":143,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":14},"end":{"line":19,"column":15}},"loc":{"start":{"line":19,"column":34},"end":{"line":30,"column":6}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":68},"end":{"line":19,"column":69}},"loc":{"start":{"line":19,"column":81},"end":{"line":30,"column":5}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":31,"column":18},"end":{"line":31,"column":19}},"loc":{"start":{"line":31,"column":38},"end":{"line":45,"column":6}},"line":31},"11":{"name":"(anonymous_11)","decl":{"start":{"line":31,"column":72},"end":{"line":31,"column":73}},"loc":{"start":{"line":31,"column":85},"end":{"line":45,"column":5}},"line":31},"12":{"name":"(anonymous_12)","decl":{"start":{"line":46,"column":22},"end":{"line":46,"column":23}},"loc":{"start":{"line":46,"column":42},"end":{"line":60,"column":6}},"line":46},"13":{"name":"(anonymous_13)","decl":{"start":{"line":46,"column":76},"end":{"line":46,"column":77}},"loc":{"start":{"line":46,"column":89},"end":{"line":60,"column":5}},"line":46},"14":{"name":"(anonymous_14)","decl":{"start":{"line":61,"column":25},"end":{"line":61,"column":26}},"loc":{"start":{"line":61,"column":45},"end":{"line":75,"column":6}},"line":61},"15":{"name":"(anonymous_15)","decl":{"start":{"line":61,"column":79},"end":{"line":61,"column":80}},"loc":{"start":{"line":61,"column":92},"end":{"line":75,"column":5}},"line":61},"16":{"name":"(anonymous_16)","decl":{"start":{"line":76,"column":24},"end":{"line":76,"column":25}},"loc":{"start":{"line":76,"column":44},"end":{"line":88,"column":6}},"line":76},"17":{"name":"(anonymous_17)","decl":{"start":{"line":76,"column":78},"end":{"line":76,"column":79}},"loc":{"start":{"line":76,"column":91},"end":{"line":88,"column":5}},"line":76},"18":{"name":"(anonymous_18)","decl":{"start":{"line":89,"column":17},"end":{"line":89,"column":18}},"loc":{"start":{"line":89,"column":37},"end":{"line":100,"column":6}},"line":89},"19":{"name":"(anonymous_19)","decl":{"start":{"line":89,"column":71},"end":{"line":89,"column":72}},"loc":{"start":{"line":89,"column":84},"end":{"line":100,"column":5}},"line":89},"20":{"name":"(anonymous_20)","decl":{"start":{"line":101,"column":17},"end":{"line":101,"column":18}},"loc":{"start":{"line":101,"column":37},"end":{"line":127,"column":6}},"line":101},"21":{"name":"(anonymous_21)","decl":{"start":{"line":101,"column":71},"end":{"line":101,"column":72}},"loc":{"start":{"line":101,"column":84},"end":{"line":127,"column":5}},"line":101},"22":{"name":"(anonymous_22)","decl":{"start":{"line":128,"column":17},"end":{"line":128,"column":18}},"loc":{"start":{"line":128,"column":37},"end":{"line":141,"column":6}},"line":128},"23":{"name":"(anonymous_23)","decl":{"start":{"line":128,"column":71},"end":{"line":128,"column":72}},"loc":{"start":{"line":128,"column":84},"end":{"line":141,"column":5}},"line":128}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},{"start":{"line":21,"column":8},"end":{"line":23,"column":9}}],"line":21},"9":{"loc":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},{"start":{"line":34,"column":8},"end":{"line":36,"column":9}}],"line":34},"10":{"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":73}},"type":"binary-expr","locations":[{"start":{"line":34,"column":12},"end":{"line":34,"column":37}},{"start":{"line":34,"column":41},"end":{"line":34,"column":73}}],"line":34},"11":{"loc":{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},{"start":{"line":37,"column":8},"end":{"line":39,"column":9}}],"line":37},"12":{"loc":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},{"start":{"line":49,"column":8},"end":{"line":51,"column":9}}],"line":49},"13":{"loc":{"start":{"line":52,"column":8},"end":{"line":54,"column":9}},"type":"if","locations":[{"start":{"line":52,"column":8},"end":{"line":54,"column":9}},{"start":{"line":52,"column":8},"end":{"line":54,"column":9}}],"line":52},"14":{"loc":{"start":{"line":52,"column":13},"end":{"line":52,"column":71}},"type":"cond-expr","locations":[{"start":{"line":52,"column":50},"end":{"line":52,"column":56}},{"start":{"line":52,"column":59},"end":{"line":52,"column":71}}],"line":52},"15":{"loc":{"start":{"line":52,"column":13},"end":{"line":52,"column":47}},"type":"binary-expr","locations":[{"start":{"line":52,"column":13},"end":{"line":52,"column":27}},{"start":{"line":52,"column":31},"end":{"line":52,"column":47}}],"line":52},"16":{"loc":{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},{"start":{"line":64,"column":8},"end":{"line":66,"column":9}}],"line":64},"17":{"loc":{"start":{"line":64,"column":12},"end":{"line":64,"column":77}},"type":"binary-expr","locations":[{"start":{"line":64,"column":12},"end":{"line":64,"column":41}},{"start":{"line":64,"column":45},"end":{"line":64,"column":77}}],"line":64},"18":{"loc":{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},{"start":{"line":67,"column":8},"end":{"line":69,"column":9}}],"line":67},"19":{"loc":{"start":{"line":67,"column":12},"end":{"line":67,"column":44}},"type":"binary-expr","locations":[{"start":{"line":67,"column":12},"end":{"line":67,"column":20}},{"start":{"line":67,"column":24},"end":{"line":67,"column":44}}],"line":67},"20":{"loc":{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},{"start":{"line":80,"column":8},"end":{"line":82,"column":9}}],"line":80},"21":{"loc":{"start":{"line":80,"column":12},"end":{"line":80,"column":40}},"type":"binary-expr","locations":[{"start":{"line":80,"column":12},"end":{"line":80,"column":18}},{"start":{"line":80,"column":22},"end":{"line":80,"column":40}}],"line":80},"22":{"loc":{"start":{"line":91,"column":8},"end":{"line":93,"column":9}},"type":"if","locations":[{"start":{"line":91,"column":8},"end":{"line":93,"column":9}},{"start":{"line":91,"column":8},"end":{"line":93,"column":9}}],"line":91},"23":{"loc":{"start":{"line":105,"column":23},"end":{"line":105,"column":81}},"type":"cond-expr","locations":[{"start":{"line":105,"column":60},"end":{"line":105,"column":66}},{"start":{"line":105,"column":69},"end":{"line":105,"column":81}}],"line":105},"24":{"loc":{"start":{"line":105,"column":23},"end":{"line":105,"column":57}},"type":"binary-expr","locations":[{"start":{"line":105,"column":23},"end":{"line":105,"column":37}},{"start":{"line":105,"column":41},"end":{"line":105,"column":57}}],"line":105},"25":{"loc":{"start":{"line":106,"column":8},"end":{"line":108,"column":9}},"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":108,"column":9}},{"start":{"line":106,"column":8},"end":{"line":108,"column":9}}],"line":106},"26":{"loc":{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},"type":"if","locations":[{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},{"start":{"line":109,"column":8},"end":{"line":111,"column":9}}],"line":109},"27":{"loc":{"start":{"line":120,"column":8},"end":{"line":122,"column":9}},"type":"if","locations":[{"start":{"line":120,"column":8},"end":{"line":122,"column":9}},{"start":{"line":120,"column":8},"end":{"line":122,"column":9}}],"line":120},"28":{"loc":{"start":{"line":130,"column":8},"end":{"line":132,"column":9}},"type":"if","locations":[{"start":{"line":130,"column":8},"end":{"line":132,"column":9}},{"start":{"line":130,"column":8},"end":{"line":132,"column":9}}],"line":130},"29":{"loc":{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},"type":"if","locations":[{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},{"start":{"line":134,"column":8},"end":{"line":136,"column":9}}],"line":134}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":3,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[3,0],"7":[3,3],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/tasks/tasksController.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/tasks/tasksController.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport tasksServices from './tasksServices';\r\nimport ITask from './tasksModels';\r\nimport CustomError from '../helpers/CustomError';\r\nimport errorFactory from '../helpers/errorFactory';\r\n\r\nconst tasksController = {\r\n  getTasks: async (req: Request, res: Response, next:NextFunction) => {\r\n    const response = await tasksServices.getTasks();\r\n    if (response instanceof CustomError) {\r\n      return next(response);\r\n    }\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'All tasks',\r\n      response,\r\n      countOfUsers: response.length\r\n    })\r\n  },\r\n  getTasksById: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id)\r\n    const task = await tasksServices.getTasksById(id);\r\n\r\n    if (id !== res.locals.user.id && res.locals.user.role !== 'Admin') {\r\n      return next(errorFactory.forbidden());\r\n    }\r\n\r\n    if (!task) {\r\n      return next(errorFactory.notFound('No task found with the specified id.'));\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Task',\r\n      task,\r\n    });\r\n  },\r\n  getTasksByUserId: async (req: Request, res: Response, next:NextFunction) => {\r\n    const userId = Number(req.params.userId);\r\n    const tasks = await tasksServices.getTasksByUserId(userId);\r\n\r\n    if (userId !== res.locals.user.id) {\r\n      return next(errorFactory.forbidden());\r\n    }\r\n\r\n    if (tasks?.length === 0) {\r\n      return next(errorFactory.notFound('No tasks found with the specified user id.'));\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Task',\r\n      tasks\r\n    });\r\n  },\r\n  getTasksIdsByUserId: async (req: Request, res: Response, next:NextFunction) => {\r\n    const userId = Number(req.params.userId);\r\n    const taskIds = await tasksServices.getTasksIdsByUserId(userId);\r\n\r\n    if(userId !== res.locals.user.id && res.locals.user.role !== 'Admin') {\r\n      return next(errorFactory.forbidden());\r\n    }\r\n\r\n    if (!taskIds  || taskIds.length === 0) {\r\n      return next(errorFactory.notFound('No tasks found with the specified user id.'));\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Task',\r\n      taskIds\r\n    });\r\n  },\r\n  getTasksByPriority: async (req: Request, res: Response, next:NextFunction) => {\r\n    const priority = Number(req.params.priority); \r\n    const userId = res.locals.user.id;\r\n    const tasks = await tasksServices.getTasksByPriority(priority, userId);\r\n\r\n    if (!tasks || tasks.length === 0) {\r\n      return next(errorFactory.notFound('No tasks found with the specified priority.'));\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Task',\r\n      tasks\r\n    });\r\n  },\r\n  createTasks: async (req: Request, res: Response, next:NextFunction) => {\r\n    const { title, description, dueDate, categoryId, priorityId } = req.body;\r\n  \r\n    if (!title) {\r\n      return next(errorFactory.badRequest('Check if title is provided'));\r\n    }\r\n\r\n    const taskId = await tasksServices.createTask( res.locals.user.id , title, description, dueDate,  categoryId, priorityId);\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Task created',\r\n      taskId\r\n    });\r\n  },\r\n  updateTasks: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id);\r\n    const { title, description, dueDate, categoryId, priorityId } = req.body;\r\n\r\n    const tasks = await tasksServices.getTasksById(id);\r\n    const userId = tasks?.userId;\r\n\r\n    if (userId !== res.locals.user.id) {\r\n      return next(errorFactory.forbidden());\r\n    }\r\n\r\n    if (!title) {\r\n      return next(errorFactory.badRequest('Check if title is provided'));\r\n    }\r\n\r\n    const updatedTasks: { [key: string]: any } = {\r\n      title,\r\n      description,\r\n      dueDate,\r\n      categoryId,\r\n      priorityId,\r\n    };\r\n\r\n    const updatedTask = await tasksServices.updateTask(id, updatedTasks as Partial<ITask>);\r\n\r\n    if (updatedTask === 0) {\r\n      return next(errorFactory.notFound());\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Task updated',\r\n    });\r\n  },\r\n  deleteTasks: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id);\r\n\r\n    if (id !== res.locals.user.id) {\r\n      return next(errorFactory.forbidden());\r\n    }\r\n\r\n    const deletedTasks = await tasksServices.deleteTask(id);\r\n\r\n    if (deletedTasks === 0) {\r\n      return next(errorFactory.notFound());\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Task deleted',\r\n    });\r\n  }\r\n}\r\n\r\nexport default tasksController;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6ce19173920ea5058f928c8e7d4b475c011989ea","contentHash":"8fa805a935f935e961646371869d67d3e3b556a72c3fa72344dc5c39c1e29e2b"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\tasks\\tasksServices.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\tasks\\tasksServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":22},"end":{"line":16,"column":72}},"17":{"start":{"line":17,"column":22},"end":{"line":86,"column":1}},"18":{"start":{"line":18,"column":20},"end":{"line":26,"column":6}},"19":{"start":{"line":19,"column":8},"end":{"line":25,"column":9}},"20":{"start":{"line":20,"column":28},"end":{"line":20,"column":81}},"21":{"start":{"line":21,"column":12},"end":{"line":21,"column":25}},"22":{"start":{"line":24,"column":12},"end":{"line":24,"column":65}},"23":{"start":{"line":27,"column":26},"end":{"line":30,"column":6}},"24":{"start":{"line":28,"column":23},"end":{"line":28,"column":96}},"25":{"start":{"line":29,"column":8},"end":{"line":29,"column":23}},"26":{"start":{"line":31,"column":34},"end":{"line":34,"column":6}},"27":{"start":{"line":32,"column":24},"end":{"line":32,"column":105}},"28":{"start":{"line":33,"column":8},"end":{"line":33,"column":21}},"29":{"start":{"line":35,"column":37},"end":{"line":38,"column":6}},"30":{"start":{"line":36,"column":26},"end":{"line":36,"column":108}},"31":{"start":{"line":37,"column":8},"end":{"line":37,"column":23}},"32":{"start":{"line":39,"column":46},"end":{"line":42,"column":6}},"33":{"start":{"line":40,"column":24},"end":{"line":40,"column":134}},"34":{"start":{"line":41,"column":8},"end":{"line":41,"column":21}},"35":{"start":{"line":43,"column":81},"end":{"line":55,"column":6}},"36":{"start":{"line":44,"column":21},"end":{"line":52,"column":9}},"37":{"start":{"line":53,"column":25},"end":{"line":53,"column":91}},"38":{"start":{"line":54,"column":8},"end":{"line":54,"column":31}},"39":{"start":{"line":56,"column":39},"end":{"line":81,"column":6}},"40":{"start":{"line":57,"column":28},"end":{"line":57,"column":30}},"41":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"42":{"start":{"line":59,"column":12},"end":{"line":59,"column":52}},"43":{"start":{"line":61,"column":8},"end":{"line":63,"column":9}},"44":{"start":{"line":62,"column":12},"end":{"line":62,"column":64}},"45":{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},"46":{"start":{"line":65,"column":12},"end":{"line":65,"column":56}},"47":{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},"48":{"start":{"line":68,"column":12},"end":{"line":68,"column":60}},"49":{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},"50":{"start":{"line":71,"column":12},"end":{"line":71,"column":62}},"51":{"start":{"line":73,"column":8},"end":{"line":75,"column":9}},"52":{"start":{"line":74,"column":12},"end":{"line":74,"column":62}},"53":{"start":{"line":76,"column":8},"end":{"line":78,"column":9}},"54":{"start":{"line":77,"column":12},"end":{"line":77,"column":21}},"55":{"start":{"line":79,"column":25},"end":{"line":79,"column":110}},"56":{"start":{"line":80,"column":8},"end":{"line":80,"column":35}},"57":{"start":{"line":82,"column":24},"end":{"line":85,"column":6}},"58":{"start":{"line":83,"column":25},"end":{"line":83,"column":115}},"59":{"start":{"line":84,"column":8},"end":{"line":84,"column":35}},"60":{"start":{"line":87,"column":0},"end":{"line":87,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":14},"end":{"line":18,"column":15}},"loc":{"start":{"line":18,"column":20},"end":{"line":26,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":54},"end":{"line":18,"column":55}},"loc":{"start":{"line":18,"column":67},"end":{"line":26,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":27,"column":18},"end":{"line":27,"column":19}},"loc":{"start":{"line":27,"column":26},"end":{"line":30,"column":6}},"line":27},"11":{"name":"(anonymous_11)","decl":{"start":{"line":27,"column":60},"end":{"line":27,"column":61}},"loc":{"start":{"line":27,"column":73},"end":{"line":30,"column":5}},"line":27},"12":{"name":"(anonymous_12)","decl":{"start":{"line":31,"column":22},"end":{"line":31,"column":23}},"loc":{"start":{"line":31,"column":34},"end":{"line":34,"column":6}},"line":31},"13":{"name":"(anonymous_13)","decl":{"start":{"line":31,"column":68},"end":{"line":31,"column":69}},"loc":{"start":{"line":31,"column":81},"end":{"line":34,"column":5}},"line":31},"14":{"name":"(anonymous_14)","decl":{"start":{"line":35,"column":25},"end":{"line":35,"column":26}},"loc":{"start":{"line":35,"column":37},"end":{"line":38,"column":6}},"line":35},"15":{"name":"(anonymous_15)","decl":{"start":{"line":35,"column":71},"end":{"line":35,"column":72}},"loc":{"start":{"line":35,"column":84},"end":{"line":38,"column":5}},"line":35},"16":{"name":"(anonymous_16)","decl":{"start":{"line":39,"column":24},"end":{"line":39,"column":25}},"loc":{"start":{"line":39,"column":46},"end":{"line":42,"column":6}},"line":39},"17":{"name":"(anonymous_17)","decl":{"start":{"line":39,"column":80},"end":{"line":39,"column":81}},"loc":{"start":{"line":39,"column":93},"end":{"line":42,"column":5}},"line":39},"18":{"name":"(anonymous_18)","decl":{"start":{"line":43,"column":16},"end":{"line":43,"column":17}},"loc":{"start":{"line":43,"column":81},"end":{"line":55,"column":6}},"line":43},"19":{"name":"(anonymous_19)","decl":{"start":{"line":43,"column":115},"end":{"line":43,"column":116}},"loc":{"start":{"line":43,"column":128},"end":{"line":55,"column":5}},"line":43},"20":{"name":"(anonymous_20)","decl":{"start":{"line":56,"column":16},"end":{"line":56,"column":17}},"loc":{"start":{"line":56,"column":39},"end":{"line":81,"column":6}},"line":56},"21":{"name":"(anonymous_21)","decl":{"start":{"line":56,"column":73},"end":{"line":56,"column":74}},"loc":{"start":{"line":56,"column":86},"end":{"line":81,"column":5}},"line":56},"22":{"name":"(anonymous_22)","decl":{"start":{"line":82,"column":16},"end":{"line":82,"column":17}},"loc":{"start":{"line":82,"column":24},"end":{"line":85,"column":6}},"line":82},"23":{"name":"(anonymous_23)","decl":{"start":{"line":82,"column":58},"end":{"line":82,"column":59}},"loc":{"start":{"line":82,"column":71},"end":{"line":85,"column":5}},"line":82}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},{"start":{"line":58,"column":8},"end":{"line":60,"column":9}}],"line":58},"9":{"loc":{"start":{"line":61,"column":8},"end":{"line":63,"column":9}},"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":63,"column":9}},{"start":{"line":61,"column":8},"end":{"line":63,"column":9}}],"line":61},"10":{"loc":{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},{"start":{"line":64,"column":8},"end":{"line":66,"column":9}}],"line":64},"11":{"loc":{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},{"start":{"line":67,"column":8},"end":{"line":69,"column":9}}],"line":67},"12":{"loc":{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},{"start":{"line":70,"column":8},"end":{"line":72,"column":9}}],"line":70},"13":{"loc":{"start":{"line":73,"column":8},"end":{"line":75,"column":9}},"type":"if","locations":[{"start":{"line":73,"column":8},"end":{"line":75,"column":9}},{"start":{"line":73,"column":8},"end":{"line":75,"column":9}}],"line":73},"14":{"loc":{"start":{"line":76,"column":8},"end":{"line":78,"column":9}},"type":"if","locations":[{"start":{"line":76,"column":8},"end":{"line":78,"column":9}},{"start":{"line":76,"column":8},"end":{"line":78,"column":9}}],"line":76}},"s":{"0":1,"1":2,"2":0,"3":2,"4":2,"5":2,"6":0,"7":0,"8":0,"9":0,"10":4,"11":2,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":2,"30":2,"31":2,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1},"f":{"0":2,"1":2,"2":0,"3":2,"4":2,"5":0,"6":4,"7":2,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":2,"15":2,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2],"3":[2,2],"4":[2,2],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/tasks/tasksServices.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/tasks/tasksServices.ts"],"names":[],"mappings":"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","sourcesContent":["import { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport database from '../../database';\r\nimport ITask from './tasksModels';\r\nimport CustomError from '../helpers/CustomError';\r\n\r\nconst tasksServices = {\r\n  getTasks: async (): Promise<ITask[] | CustomError> => {\r\n    try {\r\n    const [tasks]: [ITask[], FieldPacket[]] = await database.query('SELECT * FROM tasks');\r\n    return tasks;\r\n    } catch (error: any) {\r\n      return new CustomError(error.message, 500);\r\n    }\r\n  },\r\n  getTasksById: async (id: number): Promise<ITask | undefined> => {\r\n    const [task]: [ITask[], FieldPacket[]] = await database.query('SELECT * FROM tasks WHERE id = ?;', [id])   ;\r\n    return task[0];\r\n  },\r\n  getTasksByUserId: async (userId: number): Promise<ITask[] | undefined> => {\r\n    const [tasks]: [ITask[], FieldPacket[]] = await database.query('SELECT * FROM tasks WHERE userId = ?;', [userId]);\r\n    return tasks;\r\n  },\r\n  getTasksIdsByUserId: async (userId: number): Promise<ITask[] | undefined> => {\r\n    const [taskIds]: [ITask[], FieldPacket[]] = await database.query('SELECT id FROM tasks WHERE userId = ?;', [userId]);\r\n    return taskIds;    \r\n  },\r\n  getTasksByPriority: async (priority: number, userId: number): Promise<ITask [] | undefined> => {\r\n    const [tasks]: [ITask[], FieldPacket[]] = await database.query('SELECT * FROM tasks WHERE priorityId = ? AND userId = ?;', [priority, userId]);\r\n    return tasks;\r\n  },\r\n\r\n  createTask: async (userId: number, title: string, description: string, dueDate: Date, categoryId: number, priorityId: number) => {\r\n    const task = {\r\n      userId,\r\n      title,\r\n      description,\r\n      dueDate,\r\n      completed: false,\r\n      categoryId,\r\n      priorityId,\r\n    }\r\n\r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await database.query('INSERT INTO tasks SET ?;', [task]);\r\n    return result.insertId;\r\n  },\r\n  updateTask: async (id: number, updatedFields: Partial<ITask>) => {\r\n    const validFields: Partial<ITask> = {};\r\n    \r\n    if (updatedFields.title !== undefined) {\r\n      validFields.title = updatedFields.title;\r\n    }\r\n    if (updatedFields.description !== undefined) {\r\n      validFields.description = updatedFields.description;\r\n    }\r\n    if (updatedFields.dueDate !== undefined) {\r\n      validFields.dueDate = updatedFields.dueDate;\r\n    }\r\n    if (updatedFields.completed !== undefined) {\r\n      validFields.completed = updatedFields.completed;\r\n    }\r\n    if (updatedFields.categoryId !== undefined) {\r\n      validFields.categoryId = updatedFields.categoryId;\r\n    }\r\n    if (updatedFields.priorityId !== undefined) {\r\n      validFields.priorityId = updatedFields.priorityId;\r\n    }\r\n\r\n    if (Object.keys(validFields).length === 0) {\r\n      return 0;\r\n    }\r\n  \r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await database.query('UPDATE tasks SET ? WHERE id = ?;', [validFields, id]);\r\n  \r\n    return result.affectedRows;\r\n  },\r\n  deleteTask: async (id: number) => {\r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await database.query('UPDATE tasks SET deletedDate = NOW() WHERE id = ?;', [id]);\r\n    return result.affectedRows;\r\n  }\r\n}\r\n\r\nexport default tasksServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"43732ea8884b215731ec1ec7dfb5ae3261758f89","contentHash":"8d8b22f8c811c890a35453c6d1521e2a246d163069c96d20827a1aff5c877003"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\categories\\categoriesRoutes.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\categories\\categoriesRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":31},"end":{"line":7,"column":81}},"5":{"start":{"line":8,"column":18},"end":{"line":8,"column":71}},"6":{"start":{"line":9,"column":31},"end":{"line":9,"column":97}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":38}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":43}},"9":{"start":{"line":12,"column":0},"end":{"line":16,"column":86}},"10":{"start":{"line":17,"column":0},"end":{"line":17,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":3},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/categories/categoriesRoutes.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/categories/categoriesRoutes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,kFAA0D;AAC1D,wEAAgD;AAChD,kGAA0E;AAE1E,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,MAAM,CAAC,GAAG,CAAC,8BAAoB,CAAC,CAAC;AACjC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,8BAAoB,CAAC,aAAa,CAAC;KAChD,GAAG,CAAC,MAAM,EAAE,8BAAoB,CAAC,eAAe,CAAC;KACjD,IAAI,CAAC,GAAG,EAAE,iBAAO,EAAE,8BAAoB,CAAC,cAAc,CAAC;KACvD,KAAK,CAAC,MAAM,EAAE,iBAAO,EAAE,8BAAoB,CAAC,cAAc,CAAC;KAC3D,MAAM,CAAC,MAAM,EAAE,iBAAO,EAAE,8BAAoB,CAAC,cAAc,CAAC,CAAC;AAE9D,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from \"express\";\r\nimport categoriesController from \"./categoriesController\";  \r\nimport isAdmin from \"../../middlewares/isAdmin\";\r\nimport isLoggedInMiddleware from \"../../middlewares/isLoggedInMiddleware\";\r\n\r\nconst router = Router();\r\n\r\nrouter.use(isLoggedInMiddleware);\r\nrouter.get('/', categoriesController.getCategories)\r\n  .get('/:id', categoriesController.getCategoryById)\r\n  .post('/', isAdmin, categoriesController.createCategory)\r\n  .patch('/:id', isAdmin, categoriesController.updateCategory)\r\n  .delete('/:id', isAdmin, categoriesController.deleteCategory);\r\n\r\n  export default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0ba71d2f2dbb9932dbbd3ca4bd7cdcda96f31d5b","contentHash":"820faf8c88cb8590c1eb50b79464b661940a458fa5997e6de07d76c68501b8e0"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\categories\\categoriesController.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\categories\\categoriesController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":29},"end":{"line":15,"column":77}},"16":{"start":{"line":16,"column":22},"end":{"line":16,"column":72}},"17":{"start":{"line":17,"column":23},"end":{"line":17,"column":74}},"18":{"start":{"line":18,"column":29},"end":{"line":85,"column":1}},"19":{"start":{"line":19,"column":39},"end":{"line":30,"column":6}},"20":{"start":{"line":20,"column":27},"end":{"line":20,"column":77}},"21":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"22":{"start":{"line":22,"column":12},"end":{"line":22,"column":36}},"23":{"start":{"line":24,"column":8},"end":{"line":29,"column":11}},"24":{"start":{"line":31,"column":41},"end":{"line":42,"column":6}},"25":{"start":{"line":32,"column":19},"end":{"line":32,"column":40}},"26":{"start":{"line":33,"column":25},"end":{"line":33,"column":79}},"27":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"28":{"start":{"line":35,"column":12},"end":{"line":35,"column":59}},"29":{"start":{"line":37,"column":8},"end":{"line":41,"column":11}},"30":{"start":{"line":43,"column":40},"end":{"line":54,"column":6}},"31":{"start":{"line":44,"column":38},"end":{"line":44,"column":46}},"32":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"33":{"start":{"line":46,"column":12},"end":{"line":46,"column":61}},"34":{"start":{"line":48,"column":27},"end":{"line":48,"column":95}},"35":{"start":{"line":49,"column":8},"end":{"line":53,"column":11}},"36":{"start":{"line":55,"column":40},"end":{"line":73,"column":6}},"37":{"start":{"line":56,"column":19},"end":{"line":56,"column":40}},"38":{"start":{"line":57,"column":38},"end":{"line":57,"column":46}},"39":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"40":{"start":{"line":59,"column":12},"end":{"line":59,"column":61}},"41":{"start":{"line":61,"column":30},"end":{"line":64,"column":9}},"42":{"start":{"line":65,"column":29},"end":{"line":65,"column":97}},"43":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"44":{"start":{"line":67,"column":12},"end":{"line":67,"column":59}},"45":{"start":{"line":69,"column":8},"end":{"line":72,"column":11}},"46":{"start":{"line":74,"column":40},"end":{"line":84,"column":6}},"47":{"start":{"line":75,"column":19},"end":{"line":75,"column":40}},"48":{"start":{"line":76,"column":29},"end":{"line":76,"column":82}},"49":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"50":{"start":{"line":78,"column":12},"end":{"line":78,"column":59}},"51":{"start":{"line":80,"column":8},"end":{"line":83,"column":11}},"52":{"start":{"line":86,"column":0},"end":{"line":86,"column":39}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":19},"end":{"line":19,"column":20}},"loc":{"start":{"line":19,"column":39},"end":{"line":30,"column":6}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":73},"end":{"line":19,"column":74}},"loc":{"start":{"line":19,"column":86},"end":{"line":30,"column":5}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":31,"column":21},"end":{"line":31,"column":22}},"loc":{"start":{"line":31,"column":41},"end":{"line":42,"column":6}},"line":31},"11":{"name":"(anonymous_11)","decl":{"start":{"line":31,"column":75},"end":{"line":31,"column":76}},"loc":{"start":{"line":31,"column":88},"end":{"line":42,"column":5}},"line":31},"12":{"name":"(anonymous_12)","decl":{"start":{"line":43,"column":20},"end":{"line":43,"column":21}},"loc":{"start":{"line":43,"column":40},"end":{"line":54,"column":6}},"line":43},"13":{"name":"(anonymous_13)","decl":{"start":{"line":43,"column":74},"end":{"line":43,"column":75}},"loc":{"start":{"line":43,"column":87},"end":{"line":54,"column":5}},"line":43},"14":{"name":"(anonymous_14)","decl":{"start":{"line":55,"column":20},"end":{"line":55,"column":21}},"loc":{"start":{"line":55,"column":40},"end":{"line":73,"column":6}},"line":55},"15":{"name":"(anonymous_15)","decl":{"start":{"line":55,"column":74},"end":{"line":55,"column":75}},"loc":{"start":{"line":55,"column":87},"end":{"line":73,"column":5}},"line":55},"16":{"name":"(anonymous_16)","decl":{"start":{"line":74,"column":20},"end":{"line":74,"column":21}},"loc":{"start":{"line":74,"column":40},"end":{"line":84,"column":6}},"line":74},"17":{"name":"(anonymous_17)","decl":{"start":{"line":74,"column":74},"end":{"line":74,"column":75}},"loc":{"start":{"line":74,"column":87},"end":{"line":84,"column":5}},"line":74}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},{"start":{"line":21,"column":8},"end":{"line":23,"column":9}}],"line":21},"9":{"loc":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},{"start":{"line":34,"column":8},"end":{"line":36,"column":9}}],"line":34},"10":{"loc":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},{"start":{"line":45,"column":8},"end":{"line":47,"column":9}}],"line":45},"11":{"loc":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},{"start":{"line":58,"column":8},"end":{"line":60,"column":9}}],"line":58},"12":{"loc":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},{"start":{"line":66,"column":8},"end":{"line":68,"column":9}}],"line":66},"13":{"loc":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},{"start":{"line":77,"column":8},"end":{"line":79,"column":9}}],"line":77}},"s":{"0":1,"1":3,"2":0,"3":4,"4":2,"5":2,"6":0,"7":1,"8":1,"9":1,"10":6,"11":4,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":1,"24":1,"25":1,"26":1,"27":1,"28":0,"29":1,"30":2,"31":2,"32":2,"33":1,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":1},"f":{"0":4,"1":3,"2":0,"3":4,"4":2,"5":1,"6":6,"7":3,"8":1,"9":1,"10":1,"11":1,"12":2,"13":2,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[3,0],"2":[4,4],"3":[3,3],"4":[4,4],"5":[1,1,1],"6":[3,0],"7":[3,3],"8":[0,1],"9":[0,1],"10":[1,1],"11":[0,0],"12":[0,0],"13":[0,0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/categories/categoriesController.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/categories/categoriesController.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport categoriesServices from './categoriesServices';\r\nimport CustomError from '../helpers/CustomError';\r\nimport errorFactory from '../helpers/errorFactory';\r\n\r\nconst categoriesController = { \r\n  getCategories: async (req: Request, res: Response, next:NextFunction) => {\r\n    const categories = await categoriesServices.getCategories();\r\n\r\n    if (categories instanceof CustomError) {\r\n      return next(categories);\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'All categories',\r\n      categories,\r\n      countOfCategories: categories.length\r\n    })\r\n  },\r\n  getCategoryById: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id)\r\n    const category = await categoriesServices.getCategoryById(id);\r\n\r\n    if (!category) {\r\n      return next(errorFactory.notFound());\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Category',\r\n      category,\r\n    });\r\n  },\r\n  createCategory: async (req: Request, res: Response, next:NextFunction) => {\r\n    const { name, description } = req.body;\r\n  \r\n    if (!name) {\r\n      return next(errorFactory.badRequest());\r\n    }\r\n\r\n    const categoryId = await categoriesServices.createCategory(name, description)\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Category created',\r\n      categoryId\r\n    });\r\n  },\r\n  updateCategory: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id);\r\n    const { name, description } = req.body;\r\n\r\n    if (!name) {\r\n      return next(errorFactory.badRequest());\r\n    }\r\n\r\n    const updatedFields = {\r\n      name,\r\n      description\r\n    };\r\n\r\n    const rowsAffected = await categoriesServices.updateCategory(id, updatedFields);\r\n\r\n    if (rowsAffected === 0) {\r\n      return next(errorFactory.notFound());\r\n    }\r\n  \r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Category updated',\r\n    });\r\n  },\r\n  deleteCategory: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id);\r\n    const rowsAffected = await categoriesServices.deleteCategory(id);\r\n\r\n    if (rowsAffected === 0) {\r\n      return next(errorFactory.notFound());\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Category deleted',\r\n    });\r\n  }\r\n};\r\n\r\nexport default categoriesController;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bb452ca8ea69e635a0bd588c1172811f74d6dd11","contentHash":"7f1077e19ebfa5c43a0c158f089d0c9ca65fdbb391204f2d2b125d7240e3c002"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\categories\\categoriesServices.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\categories\\categoriesServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":22},"end":{"line":16,"column":72}},"17":{"start":{"line":17,"column":27},"end":{"line":58,"column":1}},"18":{"start":{"line":18,"column":25},"end":{"line":26,"column":6}},"19":{"start":{"line":19,"column":8},"end":{"line":25,"column":9}},"20":{"start":{"line":20,"column":33},"end":{"line":20,"column":118}},"21":{"start":{"line":21,"column":12},"end":{"line":21,"column":30}},"22":{"start":{"line":24,"column":12},"end":{"line":24,"column":65}},"23":{"start":{"line":27,"column":29},"end":{"line":30,"column":6}},"24":{"start":{"line":28,"column":27},"end":{"line":28,"column":129}},"25":{"start":{"line":29,"column":8},"end":{"line":29,"column":27}},"26":{"start":{"line":31,"column":43},"end":{"line":38,"column":6}},"27":{"start":{"line":32,"column":25},"end":{"line":35,"column":9}},"28":{"start":{"line":36,"column":25},"end":{"line":36,"column":124}},"29":{"start":{"line":37,"column":8},"end":{"line":37,"column":31}},"30":{"start":{"line":39,"column":43},"end":{"line":53,"column":6}},"31":{"start":{"line":40,"column":28},"end":{"line":40,"column":30}},"32":{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},"33":{"start":{"line":42,"column":12},"end":{"line":42,"column":50}},"34":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"35":{"start":{"line":45,"column":12},"end":{"line":45,"column":64}},"36":{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},"37":{"start":{"line":49,"column":12},"end":{"line":49,"column":21}},"38":{"start":{"line":51,"column":25},"end":{"line":51,"column":139}},"39":{"start":{"line":52,"column":8},"end":{"line":52,"column":35}},"40":{"start":{"line":54,"column":28},"end":{"line":57,"column":6}},"41":{"start":{"line":55,"column":25},"end":{"line":55,"column":120}},"42":{"start":{"line":56,"column":8},"end":{"line":56,"column":35}},"43":{"start":{"line":59,"column":0},"end":{"line":59,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":19},"end":{"line":18,"column":20}},"loc":{"start":{"line":18,"column":25},"end":{"line":26,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":59},"end":{"line":18,"column":60}},"loc":{"start":{"line":18,"column":72},"end":{"line":26,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":27,"column":21},"end":{"line":27,"column":22}},"loc":{"start":{"line":27,"column":29},"end":{"line":30,"column":6}},"line":27},"11":{"name":"(anonymous_11)","decl":{"start":{"line":27,"column":63},"end":{"line":27,"column":64}},"loc":{"start":{"line":27,"column":76},"end":{"line":30,"column":5}},"line":27},"12":{"name":"(anonymous_12)","decl":{"start":{"line":31,"column":20},"end":{"line":31,"column":21}},"loc":{"start":{"line":31,"column":43},"end":{"line":38,"column":6}},"line":31},"13":{"name":"(anonymous_13)","decl":{"start":{"line":31,"column":77},"end":{"line":31,"column":78}},"loc":{"start":{"line":31,"column":90},"end":{"line":38,"column":5}},"line":31},"14":{"name":"(anonymous_14)","decl":{"start":{"line":39,"column":20},"end":{"line":39,"column":21}},"loc":{"start":{"line":39,"column":43},"end":{"line":53,"column":6}},"line":39},"15":{"name":"(anonymous_15)","decl":{"start":{"line":39,"column":77},"end":{"line":39,"column":78}},"loc":{"start":{"line":39,"column":90},"end":{"line":53,"column":5}},"line":39},"16":{"name":"(anonymous_16)","decl":{"start":{"line":54,"column":20},"end":{"line":54,"column":21}},"loc":{"start":{"line":54,"column":28},"end":{"line":57,"column":6}},"line":54},"17":{"name":"(anonymous_17)","decl":{"start":{"line":54,"column":62},"end":{"line":54,"column":63}},"loc":{"start":{"line":54,"column":75},"end":{"line":57,"column":5}},"line":54}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},{"start":{"line":41,"column":8},"end":{"line":43,"column":9}}],"line":41},"9":{"loc":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},{"start":{"line":44,"column":8},"end":{"line":46,"column":9}}],"line":44},"10":{"loc":{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},{"start":{"line":48,"column":8},"end":{"line":50,"column":9}}],"line":48}},"s":{"0":1,"1":3,"2":0,"3":3,"4":2,"5":2,"6":0,"7":1,"8":1,"9":1,"10":5,"11":3,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1},"f":{"0":3,"1":3,"2":0,"3":3,"4":2,"5":1,"6":5,"7":2,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3],"3":[2,3],"4":[3,3],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0],"9":[0,0],"10":[0,0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/categories/categoriesServices.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/categories/categoriesServices.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,8DAAsC;AAEtC,yEAAiD;AAEjD,MAAM,kBAAkB,GAAG;IACzB,aAAa,EAAE,GAA6C,EAAE;QAC5D,IAAI;YACJ,MAAM,CAAC,UAAU,CAAC,GAAiC,MAAM,kBAAQ,CAAC,KAAK,CAAC,qDAAqD,CAAC,CAAC;YAC/H,OAAO,UAAU,CAAC;SACjB;QAAC,OAAO,KAAU,EAAE;YACnB,OAAO,IAAI,qBAAW,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;SAC5C;IACH,CAAC,CAAA;IACD,eAAe,EAAE,CAAO,EAAU,EAAuB,EAAE;QACzD,MAAM,CAAC,QAAQ,CAAC,GAAiC,MAAM,kBAAQ,CAAC,KAAK,CAAC,gEAAgE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC9I,OAAO,QAAQ,CAAC,CAAC,CAAC,CAAC;IACrB,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,IAAY,EAAE,WAAoB,EAAE,EAAE;QAC3D,MAAM,QAAQ,GAAG;YACf,IAAI;YACJ,WAAW;SACZ,CAAA;QACD,MAAM,CAAC,MAAM,CAAC,GAAsC,MAAM,kBAAQ,CAAC,KAAK,CAAC,uDAAuD,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;QAC9I,OAAO,MAAM,CAAC,QAAQ,CAAC;IACzB,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,EAAU,EAAE,aAAyC,EAAE,EAAE;QAC9E,MAAM,WAAW,GAA2C,EAAE,CAAC;QAE/D,IAAI,aAAa,CAAC,IAAI,KAAK,SAAS,EAAE;YACpC,WAAW,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC;SACvC;QACD,IAAI,aAAa,CAAC,WAAW,KAAK,SAAS,EAAE;YAC3C,WAAW,CAAC,WAAW,GAAG,aAAa,CAAC,WAAW,CAAC;SACrD;QAED,mFAAmF;QACnF,IAAI,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;YACzC,OAAO,CAAC,CAAC;SACV;QAED,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAQ,CAAC,KAAK,CACrE,+DAA+D,EAC/D,CAAC,WAAW,EAAE,EAAE,CAAC,CAClB,CAAC;QAEF,OAAO,MAAM,CAAC,YAAY,CAAC;IAC7B,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,EAAU,EAAE,EAAE;QACnC,MAAM,CAAC,MAAM,CAAC,GAAsC,MAAM,kBAAQ,CAAC,KAAK,CAAC,yDAAyD,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1I,OAAO,MAAM,CAAC,YAAY,CAAC;IAC7B,CAAC,CAAA;CACF,CAAC;AAEF,kBAAe,kBAAkB,CAAC","sourcesContent":["import { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport database from '../../database';\r\nimport ICategory from './categoriesModels';\r\nimport CustomError from '../helpers/CustomError';\r\n\r\nconst categoriesServices = { \r\n  getCategories: async (): Promise<ICategory[] | CustomError> => {\r\n    try {\r\n    const [categories]: [ICategory[], FieldPacket[]] = await database.query('SELECT * FROM categories WHERE deletedDate IS NULL;');\r\n    return categories;\r\n    } catch (error: any) {\r\n      return new CustomError(error.message, 500);\r\n    }\r\n  },\r\n  getCategoryById: async (id: number): Promise<ICategory>  => {\r\n    const [category]: [ICategory[], FieldPacket[]] = await database.query('SELECT * FROM categories WHERE id = ? AND deletedDate IS NULL;', [id]);\r\n    return category[0];\r\n  },\r\n  createCategory: async (name: string, description?: string) => {\r\n    const category = {\r\n      name,\r\n      description\r\n    }\r\n    const [result]: [ ResultSetHeader, FieldPacket[]] = await database.query('INSERT INTO categories SET ? AND deletedDate IS NULL;', [category]);\r\n    return result.insertId;\r\n  },\r\n  updateCategory: async (id: number, updatedFields: { [name: string]: string }) => {\r\n    const validFields: { [name: string]: string | undefined } = {};\r\n    \r\n    if (updatedFields.name !== undefined) {\r\n      validFields.name = updatedFields.name;\r\n    }\r\n    if (updatedFields.description !== undefined) {\r\n      validFields.description = updatedFields.description;\r\n    }\r\n\r\n    // Kui teenusesse saadetakse tühi objekt, siis ei ole vaja andmebaasi päringut teha\r\n    if (Object.keys(validFields).length === 0) {\r\n      return 0;\r\n    }\r\n  \r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await database.query(\r\n      'UPDATE categories SET ? WHERE id = ? AND deletedDate IS NULL;',\r\n      [validFields, id]\r\n    );\r\n  \r\n    return result.affectedRows;\r\n  },\r\n  deleteCategory: async (id: number) => {\r\n    const [result]: [ ResultSetHeader, FieldPacket[]] = await database.query('UPDATE categories SET deletedDate = NOW() WHERE id = ?;', [id]);\r\n    return result.affectedRows;\r\n  }\r\n};\r\n\r\nexport default categoriesServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ff75a87463900af3df6883022e105d70e0bceef0","contentHash":"ae4f54e9032d3feaba614b6fe353f3d98393444b3823e6c1e4ac30c851e53dc5"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\subtasks\\subtasksRoutes.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\subtasks\\subtasksRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":29},"end":{"line":7,"column":77}},"5":{"start":{"line":8,"column":31},"end":{"line":8,"column":97}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":38}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":43}},"8":{"start":{"line":11,"column":0},"end":{"line":15,"column":64}},"9":{"start":{"line":16,"column":0},"end":{"line":16,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":2},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/subtasks/subtasksRoutes.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/subtasks/subtasksRoutes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,8EAAsD;AACtD,kGAA0E;AAE1E,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,MAAM,CAAC,GAAG,CAAC,8BAAoB,CAAC,CAAC;AACjC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,4BAAkB,CAAC,WAAW,CAAC;KAC5C,GAAG,CAAC,MAAM,EAAE,4BAAkB,CAAC,cAAc,CAAC;KAC9C,IAAI,CAAC,GAAG,EAAE,4BAAkB,CAAC,aAAa,CAAC;KAC3C,KAAK,CAAC,MAAM,EAAE,4BAAkB,CAAC,aAAa,CAAC;KAC/C,MAAM,CAAC,MAAM,EAAE,4BAAkB,CAAC,aAAa,CAAC,CAAC;AAElD,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from 'express';\r\nimport subtasksController from './subtasksController';\r\nimport isLoggedInMiddleware from '../../middlewares/isLoggedInMiddleware';\r\n\r\nconst router = Router();\r\n\r\nrouter.use(isLoggedInMiddleware);\r\nrouter.get('/', subtasksController.getSubtasks)\r\n  .get('/:id', subtasksController.getSubtaskById)\r\n  .post('/', subtasksController.createSubtask)\r\n  .patch('/:id', subtasksController.updateSubtask)\r\n  .delete('/:id', subtasksController.deleteSubtask);\r\n\r\n  export default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f5b0831a61f4d9c75817ac24f7019f1dc526f28a","contentHash":"ff1c71a21d4fdd66cb2651b31d7b3c62ea0cb231234818eb2434904cba7d60bf"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\subtasks\\subtasksController.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\subtasks\\subtasksController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":27},"end":{"line":15,"column":73}},"16":{"start":{"line":16,"column":24},"end":{"line":16,"column":74}},"17":{"start":{"line":17,"column":22},"end":{"line":17,"column":72}},"18":{"start":{"line":18,"column":23},"end":{"line":18,"column":74}},"19":{"start":{"line":19,"column":27},"end":{"line":124,"column":1}},"20":{"start":{"line":20,"column":37},"end":{"line":31,"column":6}},"21":{"start":{"line":21,"column":25},"end":{"line":21,"column":71}},"22":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"23":{"start":{"line":23,"column":12},"end":{"line":23,"column":34}},"24":{"start":{"line":25,"column":8},"end":{"line":30,"column":11}},"25":{"start":{"line":32,"column":40},"end":{"line":56,"column":6}},"26":{"start":{"line":34,"column":19},"end":{"line":34,"column":40}},"27":{"start":{"line":35,"column":24},"end":{"line":35,"column":75}},"28":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"29":{"start":{"line":37,"column":12},"end":{"line":37,"column":59}},"30":{"start":{"line":40,"column":28},"end":{"line":40,"column":140}},"31":{"start":{"line":42,"column":31},"end":{"line":42,"column":85}},"32":{"start":{"line":44,"column":33},"end":{"line":44,"column":65}},"33":{"start":{"line":44,"column":57},"end":{"line":44,"column":64}},"34":{"start":{"line":45,"column":36},"end":{"line":45,"column":167}},"35":{"start":{"line":46,"column":8},"end":{"line":55,"column":9}},"36":{"start":{"line":47,"column":12},"end":{"line":51,"column":15}},"37":{"start":{"line":54,"column":12},"end":{"line":54,"column":60}},"38":{"start":{"line":57,"column":39},"end":{"line":68,"column":6}},"39":{"start":{"line":58,"column":47},"end":{"line":58,"column":55}},"40":{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},"41":{"start":{"line":60,"column":12},"end":{"line":60,"column":61}},"42":{"start":{"line":62,"column":26},"end":{"line":62,"column":100}},"43":{"start":{"line":63,"column":8},"end":{"line":67,"column":11}},"44":{"start":{"line":69,"column":39},"end":{"line":100,"column":6}},"45":{"start":{"line":71,"column":19},"end":{"line":71,"column":40}},"46":{"start":{"line":72,"column":50},"end":{"line":72,"column":58}},"47":{"start":{"line":73,"column":8},"end":{"line":75,"column":9}},"48":{"start":{"line":74,"column":12},"end":{"line":74,"column":61}},"49":{"start":{"line":76,"column":24},"end":{"line":76,"column":75}},"50":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"51":{"start":{"line":78,"column":12},"end":{"line":78,"column":59}},"52":{"start":{"line":80,"column":28},"end":{"line":80,"column":140}},"53":{"start":{"line":81,"column":31},"end":{"line":81,"column":85}},"54":{"start":{"line":82,"column":33},"end":{"line":82,"column":65}},"55":{"start":{"line":82,"column":57},"end":{"line":82,"column":64}},"56":{"start":{"line":83,"column":36},"end":{"line":83,"column":167}},"57":{"start":{"line":84,"column":8},"end":{"line":99,"column":9}},"58":{"start":{"line":85,"column":34},"end":{"line":89,"column":13}},"59":{"start":{"line":90,"column":33},"end":{"line":90,"column":98}},"60":{"start":{"line":91,"column":12},"end":{"line":95,"column":15}},"61":{"start":{"line":98,"column":12},"end":{"line":98,"column":60}},"62":{"start":{"line":101,"column":39},"end":{"line":123,"column":6}},"63":{"start":{"line":103,"column":19},"end":{"line":103,"column":40}},"64":{"start":{"line":104,"column":24},"end":{"line":104,"column":75}},"65":{"start":{"line":105,"column":8},"end":{"line":107,"column":9}},"66":{"start":{"line":106,"column":12},"end":{"line":106,"column":59}},"67":{"start":{"line":108,"column":28},"end":{"line":108,"column":140}},"68":{"start":{"line":109,"column":31},"end":{"line":109,"column":85}},"69":{"start":{"line":110,"column":33},"end":{"line":110,"column":65}},"70":{"start":{"line":110,"column":57},"end":{"line":110,"column":64}},"71":{"start":{"line":111,"column":36},"end":{"line":111,"column":167}},"72":{"start":{"line":112,"column":8},"end":{"line":122,"column":9}},"73":{"start":{"line":113,"column":33},"end":{"line":113,"column":83}},"74":{"start":{"line":114,"column":12},"end":{"line":118,"column":15}},"75":{"start":{"line":121,"column":12},"end":{"line":121,"column":60}},"76":{"start":{"line":125,"column":0},"end":{"line":125,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":17},"end":{"line":20,"column":18}},"loc":{"start":{"line":20,"column":37},"end":{"line":31,"column":6}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":71},"end":{"line":20,"column":72}},"loc":{"start":{"line":20,"column":84},"end":{"line":31,"column":5}},"line":20},"10":{"name":"(anonymous_10)","decl":{"start":{"line":32,"column":20},"end":{"line":32,"column":21}},"loc":{"start":{"line":32,"column":40},"end":{"line":56,"column":6}},"line":32},"11":{"name":"(anonymous_11)","decl":{"start":{"line":32,"column":74},"end":{"line":32,"column":75}},"loc":{"start":{"line":32,"column":87},"end":{"line":56,"column":5}},"line":32},"12":{"name":"(anonymous_12)","decl":{"start":{"line":44,"column":49},"end":{"line":44,"column":50}},"loc":{"start":{"line":44,"column":57},"end":{"line":44,"column":64}},"line":44},"13":{"name":"(anonymous_13)","decl":{"start":{"line":57,"column":19},"end":{"line":57,"column":20}},"loc":{"start":{"line":57,"column":39},"end":{"line":68,"column":6}},"line":57},"14":{"name":"(anonymous_14)","decl":{"start":{"line":57,"column":73},"end":{"line":57,"column":74}},"loc":{"start":{"line":57,"column":86},"end":{"line":68,"column":5}},"line":57},"15":{"name":"(anonymous_15)","decl":{"start":{"line":69,"column":19},"end":{"line":69,"column":20}},"loc":{"start":{"line":69,"column":39},"end":{"line":100,"column":6}},"line":69},"16":{"name":"(anonymous_16)","decl":{"start":{"line":69,"column":73},"end":{"line":69,"column":74}},"loc":{"start":{"line":69,"column":86},"end":{"line":100,"column":5}},"line":69},"17":{"name":"(anonymous_17)","decl":{"start":{"line":82,"column":49},"end":{"line":82,"column":50}},"loc":{"start":{"line":82,"column":57},"end":{"line":82,"column":64}},"line":82},"18":{"name":"(anonymous_18)","decl":{"start":{"line":101,"column":19},"end":{"line":101,"column":20}},"loc":{"start":{"line":101,"column":39},"end":{"line":123,"column":6}},"line":101},"19":{"name":"(anonymous_19)","decl":{"start":{"line":101,"column":73},"end":{"line":101,"column":74}},"loc":{"start":{"line":101,"column":86},"end":{"line":123,"column":5}},"line":101},"20":{"name":"(anonymous_20)","decl":{"start":{"line":110,"column":49},"end":{"line":110,"column":50}},"loc":{"start":{"line":110,"column":57},"end":{"line":110,"column":64}},"line":110}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},{"start":{"line":22,"column":8},"end":{"line":24,"column":9}}],"line":22},"9":{"loc":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"type":"if","locations":[{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},{"start":{"line":36,"column":8},"end":{"line":38,"column":9}}],"line":36},"10":{"loc":{"start":{"line":40,"column":28},"end":{"line":40,"column":140}},"type":"cond-expr","locations":[{"start":{"line":40,"column":133},"end":{"line":40,"column":135}},{"start":{"line":40,"column":138},"end":{"line":40,"column":140}}],"line":40},"11":{"loc":{"start":{"line":40,"column":28},"end":{"line":40,"column":130}},"type":"binary-expr","locations":[{"start":{"line":40,"column":28},"end":{"line":40,"column":113}},{"start":{"line":40,"column":117},"end":{"line":40,"column":130}}],"line":40},"12":{"loc":{"start":{"line":45,"column":36},"end":{"line":45,"column":167}},"type":"cond-expr","locations":[{"start":{"line":45,"column":160},"end":{"line":45,"column":162}},{"start":{"line":45,"column":165},"end":{"line":45,"column":167}}],"line":45},"13":{"loc":{"start":{"line":45,"column":36},"end":{"line":45,"column":157}},"type":"binary-expr","locations":[{"start":{"line":45,"column":36},"end":{"line":45,"column":140}},{"start":{"line":45,"column":144},"end":{"line":45,"column":157}}],"line":45},"14":{"loc":{"start":{"line":45,"column":42},"end":{"line":45,"column":130}},"type":"cond-expr","locations":[{"start":{"line":45,"column":97},"end":{"line":45,"column":103}},{"start":{"line":45,"column":106},"end":{"line":45,"column":130}}],"line":45},"15":{"loc":{"start":{"line":45,"column":42},"end":{"line":45,"column":94}},"type":"binary-expr","locations":[{"start":{"line":45,"column":42},"end":{"line":45,"column":65}},{"start":{"line":45,"column":69},"end":{"line":45,"column":94}}],"line":45},"16":{"loc":{"start":{"line":46,"column":8},"end":{"line":55,"column":9}},"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":55,"column":9}},{"start":{"line":46,"column":8},"end":{"line":55,"column":9}}],"line":46},"17":{"loc":{"start":{"line":46,"column":12},"end":{"line":46,"column":95}},"type":"binary-expr","locations":[{"start":{"line":46,"column":12},"end":{"line":46,"column":45}},{"start":{"line":46,"column":49},"end":{"line":46,"column":95}}],"line":46},"18":{"loc":{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},{"start":{"line":59,"column":8},"end":{"line":61,"column":9}}],"line":59},"19":{"loc":{"start":{"line":59,"column":12},"end":{"line":59,"column":29}},"type":"binary-expr","locations":[{"start":{"line":59,"column":12},"end":{"line":59,"column":18}},{"start":{"line":59,"column":22},"end":{"line":59,"column":29}}],"line":59},"20":{"loc":{"start":{"line":73,"column":8},"end":{"line":75,"column":9}},"type":"if","locations":[{"start":{"line":73,"column":8},"end":{"line":75,"column":9}},{"start":{"line":73,"column":8},"end":{"line":75,"column":9}}],"line":73},"21":{"loc":{"start":{"line":73,"column":12},"end":{"line":73,"column":61}},"type":"binary-expr","locations":[{"start":{"line":73,"column":12},"end":{"line":73,"column":18}},{"start":{"line":73,"column":22},"end":{"line":73,"column":34}},{"start":{"line":73,"column":38},"end":{"line":73,"column":61}}],"line":73},"22":{"loc":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},{"start":{"line":77,"column":8},"end":{"line":79,"column":9}}],"line":77},"23":{"loc":{"start":{"line":80,"column":28},"end":{"line":80,"column":140}},"type":"cond-expr","locations":[{"start":{"line":80,"column":133},"end":{"line":80,"column":135}},{"start":{"line":80,"column":138},"end":{"line":80,"column":140}}],"line":80},"24":{"loc":{"start":{"line":80,"column":28},"end":{"line":80,"column":130}},"type":"binary-expr","locations":[{"start":{"line":80,"column":28},"end":{"line":80,"column":113}},{"start":{"line":80,"column":117},"end":{"line":80,"column":130}}],"line":80},"25":{"loc":{"start":{"line":83,"column":36},"end":{"line":83,"column":167}},"type":"cond-expr","locations":[{"start":{"line":83,"column":160},"end":{"line":83,"column":162}},{"start":{"line":83,"column":165},"end":{"line":83,"column":167}}],"line":83},"26":{"loc":{"start":{"line":83,"column":36},"end":{"line":83,"column":157}},"type":"binary-expr","locations":[{"start":{"line":83,"column":36},"end":{"line":83,"column":140}},{"start":{"line":83,"column":144},"end":{"line":83,"column":157}}],"line":83},"27":{"loc":{"start":{"line":83,"column":42},"end":{"line":83,"column":130}},"type":"cond-expr","locations":[{"start":{"line":83,"column":97},"end":{"line":83,"column":103}},{"start":{"line":83,"column":106},"end":{"line":83,"column":130}}],"line":83},"28":{"loc":{"start":{"line":83,"column":42},"end":{"line":83,"column":94}},"type":"binary-expr","locations":[{"start":{"line":83,"column":42},"end":{"line":83,"column":65}},{"start":{"line":83,"column":69},"end":{"line":83,"column":94}}],"line":83},"29":{"loc":{"start":{"line":84,"column":8},"end":{"line":99,"column":9}},"type":"if","locations":[{"start":{"line":84,"column":8},"end":{"line":99,"column":9}},{"start":{"line":84,"column":8},"end":{"line":99,"column":9}}],"line":84},"30":{"loc":{"start":{"line":84,"column":12},"end":{"line":84,"column":95}},"type":"binary-expr","locations":[{"start":{"line":84,"column":12},"end":{"line":84,"column":45}},{"start":{"line":84,"column":49},"end":{"line":84,"column":95}}],"line":84},"31":{"loc":{"start":{"line":105,"column":8},"end":{"line":107,"column":9}},"type":"if","locations":[{"start":{"line":105,"column":8},"end":{"line":107,"column":9}},{"start":{"line":105,"column":8},"end":{"line":107,"column":9}}],"line":105},"32":{"loc":{"start":{"line":108,"column":28},"end":{"line":108,"column":140}},"type":"cond-expr","locations":[{"start":{"line":108,"column":133},"end":{"line":108,"column":135}},{"start":{"line":108,"column":138},"end":{"line":108,"column":140}}],"line":108},"33":{"loc":{"start":{"line":108,"column":28},"end":{"line":108,"column":130}},"type":"binary-expr","locations":[{"start":{"line":108,"column":28},"end":{"line":108,"column":113}},{"start":{"line":108,"column":117},"end":{"line":108,"column":130}}],"line":108},"34":{"loc":{"start":{"line":111,"column":36},"end":{"line":111,"column":167}},"type":"cond-expr","locations":[{"start":{"line":111,"column":160},"end":{"line":111,"column":162}},{"start":{"line":111,"column":165},"end":{"line":111,"column":167}}],"line":111},"35":{"loc":{"start":{"line":111,"column":36},"end":{"line":111,"column":157}},"type":"binary-expr","locations":[{"start":{"line":111,"column":36},"end":{"line":111,"column":140}},{"start":{"line":111,"column":144},"end":{"line":111,"column":157}}],"line":111},"36":{"loc":{"start":{"line":111,"column":42},"end":{"line":111,"column":130}},"type":"cond-expr","locations":[{"start":{"line":111,"column":97},"end":{"line":111,"column":103}},{"start":{"line":111,"column":106},"end":{"line":111,"column":130}}],"line":111},"37":{"loc":{"start":{"line":111,"column":42},"end":{"line":111,"column":94}},"type":"binary-expr","locations":[{"start":{"line":111,"column":42},"end":{"line":111,"column":65}},{"start":{"line":111,"column":69},"end":{"line":111,"column":94}}],"line":111},"38":{"loc":{"start":{"line":112,"column":8},"end":{"line":122,"column":9}},"type":"if","locations":[{"start":{"line":112,"column":8},"end":{"line":122,"column":9}},{"start":{"line":112,"column":8},"end":{"line":122,"column":9}}],"line":112},"39":{"loc":{"start":{"line":112,"column":12},"end":{"line":112,"column":95}},"type":"binary-expr","locations":[{"start":{"line":112,"column":12},"end":{"line":112,"column":45}},{"start":{"line":112,"column":49},"end":{"line":112,"column":95}}],"line":112}},"s":{"0":1,"1":7,"2":0,"3":5,"4":7,"5":7,"6":0,"7":0,"8":0,"9":0,"10":12,"11":5,"12":1,"13":4,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":0,"24":1,"25":2,"26":2,"27":2,"28":2,"29":0,"30":2,"31":2,"32":2,"33":4,"34":2,"35":2,"36":1,"37":1,"38":2,"39":2,"40":2,"41":2,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":1},"f":{"0":5,"1":7,"2":0,"3":5,"4":7,"5":0,"6":12,"7":4,"8":1,"9":1,"10":2,"11":2,"12":4,"13":2,"14":2,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"b":{"0":[1,1,1],"1":[7,0],"2":[5,5],"3":[5,7],"4":[5,5],"5":[1,1,1],"6":[4,0],"7":[4,4],"8":[0,1],"9":[0,2],"10":[2,0],"11":[2,2],"12":[2,0],"13":[2,2],"14":[0,2],"15":[2,2],"16":[1,1],"17":[2,2],"18":[2,0],"19":[2,0],"20":[0,0],"21":[0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/subtasks/subtasksController.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/subtasks/subtasksController.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport subtasksServices from './subtasksServices';\r\nimport ISubtask from './subtasksModels';\r\nimport tasksServices from '../tasks/tasksServices';\r\nimport CustomError from '../helpers/CustomError';\r\nimport errorFactory from '../helpers/errorFactory';\r\n\r\nconst subtasksController = {\r\n  getSubtasks: async (req: Request, res: Response, next:NextFunction) => {\r\n    const subtasks = await subtasksServices.getSubtasks();\r\n    if (subtasks instanceof CustomError) {\r\n      return next(subtasks);\r\n    }\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'All subtasks',\r\n      subtasks,\r\n      countOfSubtasks: subtasks.length\r\n    })\r\n  },\r\n  getSubtaskById: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id);\r\n\r\n    const subtask = await subtasksServices.getSubtaskById(id);\r\n\r\n    if (!subtask) {\r\n      return next(errorFactory.notFound());\r\n    }\r\n\r\n    //Saadakse kasutaja taskide id-d\r\n    const userTaskIds = await tasksServices.getTasksIdsByUserId(res.locals.user.id) ?? [];\r\n    //Saadakse requestitud subtaski taski id\r\n    const subtasksTaskId = await subtasksServices.getSubtasksTaskId(id);\r\n    //Vaja kontrollida, kas kasutaja taskide id-de hulgas on requestitud subtaski taski id\r\n\r\n    const userTaskIdsArray = userTaskIds.map(task => task.id);\r\n    const subtasksTaskIdValue = subtasksTaskId?.[0].taskId ?? '';\r\n\r\n    if (subtasksTaskIdValue !== undefined && userTaskIdsArray.includes(subtasksTaskIdValue as number)) {\r\n      return res.status(200).json({\r\n        success: true,\r\n        message: 'Subtask',\r\n        subtask,\r\n      });\r\n    } else {\r\n      return next(errorFactory.forbidden());\r\n    }\r\n  },\r\n  createSubtask: async (req: Request, res: Response, next:NextFunction) => {\r\n    const { taskId, title, description } = req.body;\r\n  \r\n    if (!title || !taskId) {\r\n      return next(errorFactory.badRequest());\r\n    }\r\n\r\n    const subtaskId = await subtasksServices.createSubtask(taskId, title, description)\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Subtask created',\r\n      subtaskId\r\n    });\r\n  },\r\n  updateSubtask: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id);\r\n    const { title, description, completed } = req.body;\r\n\r\n    if (!title && !description && completed === undefined) {\r\n      return next(errorFactory.badRequest());\r\n    }\r\n\r\n    const subtask = await subtasksServices.getSubtaskById(id);\r\n\r\n    if (!subtask) {\r\n      return next(errorFactory.notFound());\r\n    }\r\n\r\n    const userTaskIds = await tasksServices.getTasksIdsByUserId(res.locals.user.id) ?? [];\r\n    const subtasksTaskId = await subtasksServices.getSubtasksTaskId(id);\r\n\r\n    const userTaskIdsArray = userTaskIds.map(task => task.id);\r\n    const subtasksTaskIdValue = subtasksTaskId?.[0].taskId ?? '';\r\n\r\n    if (subtasksTaskIdValue !== undefined && userTaskIdsArray.includes(subtasksTaskIdValue as number)) {\r\n      const updatedFields = {\r\n        title,\r\n        description,\r\n        completed\r\n      } as Partial<ISubtask>;\r\n\r\n      const affectedRows = await subtasksServices.updateSubtask(id, updatedFields);\r\n\r\n      return res.status(200).json({\r\n        success: true,\r\n        message: 'Subtask updated',\r\n        affectedRows\r\n      });\r\n    } else {\r\n      return next(errorFactory.forbidden());\r\n    }\r\n\r\n  },\r\n  deleteSubtask: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id);\r\n\r\n    const subtask = await subtasksServices.getSubtaskById(id);\r\n\r\n    if (!subtask) {\r\n      return next(errorFactory.notFound());\r\n    }\r\n\r\n    const userTaskIds = await tasksServices.getTasksIdsByUserId(res.locals.user.id) ?? [];\r\n    const subtasksTaskId = await subtasksServices.getSubtasksTaskId(id);\r\n\r\n    const userTaskIdsArray = userTaskIds.map(task => task.id);\r\n    const subtasksTaskIdValue = subtasksTaskId?.[0].taskId ?? '';\r\n\r\n    if (subtasksTaskIdValue !== undefined && userTaskIdsArray.includes(subtasksTaskIdValue as number)) {\r\n      \r\n      const affectedRows = await subtasksServices.deleteSubtask(id);\r\n\r\n      return res.status(200).json({\r\n        success: true,\r\n        message: 'Subtask deleted',\r\n        affectedRows\r\n      });\r\n    \r\n    } else {\r\n      return next(errorFactory.forbidden());\r\n    }\r\n  }\r\n};\r\n\r\nexport default subtasksController;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"36b72eb9f9249e72a6f8b7fa054c4466879d4450","contentHash":"12056d57520f905f80a261f265fa8c7ccbf06bc4ad795a5b22e7deefaabfc307"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\subtasks\\subtasksServices.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\subtasks\\subtasksServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":22},"end":{"line":16,"column":72}},"17":{"start":{"line":17,"column":25},"end":{"line":66,"column":1}},"18":{"start":{"line":18,"column":23},"end":{"line":26,"column":6}},"19":{"start":{"line":19,"column":8},"end":{"line":25,"column":9}},"20":{"start":{"line":20,"column":31},"end":{"line":20,"column":88}},"21":{"start":{"line":21,"column":12},"end":{"line":21,"column":28}},"22":{"start":{"line":24,"column":12},"end":{"line":24,"column":65}},"23":{"start":{"line":27,"column":28},"end":{"line":30,"column":6}},"24":{"start":{"line":28,"column":26},"end":{"line":28,"column":126}},"25":{"start":{"line":29,"column":8},"end":{"line":29,"column":26}},"26":{"start":{"line":31,"column":31},"end":{"line":34,"column":6}},"27":{"start":{"line":32,"column":27},"end":{"line":32,"column":132}},"28":{"start":{"line":33,"column":8},"end":{"line":33,"column":24}},"29":{"start":{"line":35,"column":51},"end":{"line":44,"column":6}},"30":{"start":{"line":36,"column":24},"end":{"line":41,"column":9}},"31":{"start":{"line":42,"column":25},"end":{"line":42,"column":97}},"32":{"start":{"line":43,"column":8},"end":{"line":43,"column":31}},"33":{"start":{"line":45,"column":42},"end":{"line":61,"column":6}},"34":{"start":{"line":46,"column":28},"end":{"line":46,"column":30}},"35":{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},"36":{"start":{"line":48,"column":12},"end":{"line":48,"column":52}},"37":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"38":{"start":{"line":51,"column":12},"end":{"line":51,"column":64}},"39":{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},"40":{"start":{"line":54,"column":12},"end":{"line":54,"column":60}},"41":{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},"42":{"start":{"line":57,"column":12},"end":{"line":57,"column":21}},"43":{"start":{"line":59,"column":25},"end":{"line":59,"column":113}},"44":{"start":{"line":60,"column":8},"end":{"line":60,"column":35}},"45":{"start":{"line":62,"column":27},"end":{"line":65,"column":6}},"46":{"start":{"line":63,"column":25},"end":{"line":63,"column":118}},"47":{"start":{"line":64,"column":8},"end":{"line":64,"column":35}},"48":{"start":{"line":67,"column":0},"end":{"line":67,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":17},"end":{"line":18,"column":18}},"loc":{"start":{"line":18,"column":23},"end":{"line":26,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":57},"end":{"line":18,"column":58}},"loc":{"start":{"line":18,"column":70},"end":{"line":26,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":27,"column":20},"end":{"line":27,"column":21}},"loc":{"start":{"line":27,"column":28},"end":{"line":30,"column":6}},"line":27},"11":{"name":"(anonymous_11)","decl":{"start":{"line":27,"column":62},"end":{"line":27,"column":63}},"loc":{"start":{"line":27,"column":75},"end":{"line":30,"column":5}},"line":27},"12":{"name":"(anonymous_12)","decl":{"start":{"line":31,"column":23},"end":{"line":31,"column":24}},"loc":{"start":{"line":31,"column":31},"end":{"line":34,"column":6}},"line":31},"13":{"name":"(anonymous_13)","decl":{"start":{"line":31,"column":65},"end":{"line":31,"column":66}},"loc":{"start":{"line":31,"column":78},"end":{"line":34,"column":5}},"line":31},"14":{"name":"(anonymous_14)","decl":{"start":{"line":35,"column":19},"end":{"line":35,"column":20}},"loc":{"start":{"line":35,"column":51},"end":{"line":44,"column":6}},"line":35},"15":{"name":"(anonymous_15)","decl":{"start":{"line":35,"column":85},"end":{"line":35,"column":86}},"loc":{"start":{"line":35,"column":98},"end":{"line":44,"column":5}},"line":35},"16":{"name":"(anonymous_16)","decl":{"start":{"line":45,"column":19},"end":{"line":45,"column":20}},"loc":{"start":{"line":45,"column":42},"end":{"line":61,"column":6}},"line":45},"17":{"name":"(anonymous_17)","decl":{"start":{"line":45,"column":76},"end":{"line":45,"column":77}},"loc":{"start":{"line":45,"column":89},"end":{"line":61,"column":5}},"line":45},"18":{"name":"(anonymous_18)","decl":{"start":{"line":62,"column":19},"end":{"line":62,"column":20}},"loc":{"start":{"line":62,"column":27},"end":{"line":65,"column":6}},"line":62},"19":{"name":"(anonymous_19)","decl":{"start":{"line":62,"column":61},"end":{"line":62,"column":62}},"loc":{"start":{"line":62,"column":74},"end":{"line":65,"column":5}},"line":62}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},{"start":{"line":47,"column":8},"end":{"line":49,"column":9}}],"line":47},"9":{"loc":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},{"start":{"line":50,"column":8},"end":{"line":52,"column":9}}],"line":50},"10":{"loc":{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},{"start":{"line":53,"column":8},"end":{"line":55,"column":9}}],"line":53},"11":{"loc":{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},{"start":{"line":56,"column":8},"end":{"line":58,"column":9}}],"line":56}},"s":{"0":1,"1":5,"2":0,"3":5,"4":5,"5":5,"6":0,"7":0,"8":0,"9":0,"10":10,"11":5,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":2,"24":2,"25":2,"26":2,"27":2,"28":2,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1},"f":{"0":5,"1":5,"2":0,"3":5,"4":5,"5":0,"6":10,"7":2,"8":1,"9":1,"10":2,"11":2,"12":2,"13":2,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[5,0],"2":[5,5],"3":[5,5],"4":[5,5],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/subtasks/subtasksServices.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/subtasks/subtasksServices.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,8DAAsC;AAGtC,yEAAiD;AAEjD,MAAM,gBAAgB,GAAG;IACvB,WAAW,EAAE,GAA4C,EAAE;QACzD,IAAI;YACJ,MAAM,CAAC,QAAQ,CAAC,GAAgC,MAAM,kBAAQ,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;YAChG,OAAO,QAAQ,CAAC;SACf;QAAC,OAAO,KAAU,EAAE;YACnB,OAAO,IAAI,qBAAW,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;SAC5C;IACH,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,EAAU,EAAiC,EAAE;QAClE,MAAM,CAAC,OAAO,CAAC,GAAgC,MAAM,kBAAQ,CAAC,KAAK,CAAC,8DAA8D,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1I,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC;IACpB,CAAC,CAAA;IACD,iBAAiB,EAAE,CAAO,EAAU,EAAmC,EAAE;QACvE,MAAM,CAAC,QAAQ,CAAC,GAAgC,MAAM,kBAAQ,CAAC,KAAK,CAAC,mEAAmE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAChJ,OAAO,QAAQ,CAAC;IAClB,CAAC,CAAA;IACD,aAAa,EAAE,CAAO,MAAa,EAAE,KAAa,EAAE,WAAoB,EAAE,EAAE;QAC1E,MAAM,OAAO,GAAG;YACd,MAAM;YACN,KAAK;YACL,WAAW;YACX,SAAS,EAAE,KAAK;SACjB,CAAC;QAEF,MAAM,CAAC,MAAM,CAAC,GAAsC,MAAM,kBAAQ,CAAC,KAAK,CAAC,6BAA6B,EAAE,CAAC,OAAO,CAAC,CAAC,CAAA;QAClH,OAAO,MAAM,CAAC,QAAQ,CAAC;IACzB,CAAC,CAAA;IACD,aAAa,EAAE,CAAO,EAAU,EAAE,aAA6B,EAAE,EAAE;QACjE,MAAM,WAAW,GAAmB,EAAE,CAAC;QAEvC,IAAI,aAAa,CAAC,KAAK,KAAK,SAAS,EAAE;YACrC,WAAW,CAAC,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC;SACzC;QACD,IAAI,aAAa,CAAC,WAAW,KAAK,SAAS,EAAE;YAC3C,WAAW,CAAC,WAAW,GAAG,aAAa,CAAC,WAAW,CAAC;SACrD;QACD,IAAI,aAAa,CAAC,SAAS,KAAK,SAAS,EAAE;YACzC,WAAW,CAAC,SAAS,GAAG,aAAa,CAAC,SAAS,CAAC;SACjD;QAED,IAAI,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;YACzC,OAAO,CAAC,CAAC;SACV;QAED,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAQ,CAAC,KAAK,CAAC,qCAAqC,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC;QAElI,OAAO,MAAM,CAAC,YAAY,CAAC;IAC7B,CAAC,CAAA;IACD,aAAa,EAAE,CAAO,EAAU,EAAE,EAAE;QAClC,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAQ,CAAC,KAAK,CAAC,uDAAuD,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACvI,OAAO,MAAM,CAAC,YAAY,CAAC;IAC7B,CAAC,CAAA;CACF,CAAC;AAEF,kBAAe,gBAAgB,CAAC","sourcesContent":["import { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport database from '../../database';\r\nimport ISubtask from './subtasksModels';\r\nimport ITask from '../tasks/tasksModels';\r\nimport CustomError from '../helpers/CustomError';\r\n\r\nconst subtasksServices = {\r\n  getSubtasks: async (): Promise<ISubtask[] | CustomError> => {\r\n    try {\r\n    const [subtasks]: [ISubtask[], FieldPacket[]] = await database.query('SELECT * FROM subtasks;');\r\n    return subtasks;\r\n    } catch (error: any) {\r\n      return new CustomError(error.message, 500);\r\n    }\r\n  },\r\n  getSubtaskById: async (id: number): Promise<ISubtask | undefined> => {\r\n    const [subtask]: [ISubtask[], FieldPacket[]] = await database.query('SELECT * FROM subtasks WHERE id = ? AND deletedDate IS NULL;', [id]);\r\n    return subtask[0];\r\n  },\r\n  getSubtasksTaskId: async (id: number): Promise<ISubtask[] | undefined> => {\r\n    const [subtasks]: [ISubtask[], FieldPacket[]] = await database.query('SELECT taskId FROM subtasks WHERE id = ? AND deletedDate IS NULL;', [id]);\r\n    return subtasks;\r\n  },\r\n  createSubtask: async (taskId:number, title: string, description?: string) => {\r\n    const subtask = {\r\n      taskId,\r\n      title,\r\n      description,\r\n      completed: false\r\n    };\r\n\r\n    const [result]: [ResultSetHeader, FieldPacket[] ] = await database.query('INSERT INTO subtasks SET ?;', [subtask])\r\n    return result.insertId;\r\n  },\r\n  updateSubtask: async (id: number, updatedFields: Partial<ITask>) => {\r\n    const validFields: Partial<ITask> = {};\r\n    \r\n    if (updatedFields.title !== undefined) {\r\n      validFields.title = updatedFields.title;\r\n    }\r\n    if (updatedFields.description !== undefined) {\r\n      validFields.description = updatedFields.description;\r\n    }\r\n    if (updatedFields.completed !== undefined) {\r\n      validFields.completed = updatedFields.completed;\r\n    }\r\n\r\n    if (Object.keys(validFields).length === 0) {\r\n      return 0;\r\n    }\r\n  \r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await database.query('UPDATE subtasks SET ? WHERE id = ?;', [validFields, id]);\r\n  \r\n    return result.affectedRows;\r\n  },\r\n  deleteSubtask: async (id: number) => {\r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await database.query('UPDATE subtasks SET deletedDate = NOW() WHERE id = ?;', [id]);\r\n    return result.affectedRows;\r\n  }\r\n};\r\n\r\nexport default subtasksServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"15fa5c6d88cd5bc499df0677ae004f2d1a6d3d86","contentHash":"d768b7585ae4c5c09a91363ebb697706524e5381933ffe0cba3c3ab148c27c5b"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\priorities\\prioritiesRoutes.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\priorities\\prioritiesRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":31},"end":{"line":7,"column":81}},"5":{"start":{"line":8,"column":18},"end":{"line":8,"column":71}},"6":{"start":{"line":9,"column":31},"end":{"line":9,"column":97}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":38}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":43}},"9":{"start":{"line":12,"column":0},"end":{"line":16,"column":86}},"10":{"start":{"line":17,"column":0},"end":{"line":17,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":3},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/priorities/prioritiesRoutes.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/priorities/prioritiesRoutes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,kFAA0D;AAC1D,wEAAgD;AAChD,kGAA0E;AAE1E,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,MAAM,CAAC,GAAG,CAAC,8BAAoB,CAAC,CAAC;AACjC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,8BAAoB,CAAC,aAAa,CAAC;KAChD,GAAG,CAAC,MAAM,EAAE,8BAAoB,CAAC,eAAe,CAAC;KACjD,IAAI,CAAC,GAAG,EAAE,iBAAO,EAAE,8BAAoB,CAAC,cAAc,CAAC;KACvD,KAAK,CAAC,MAAM,EAAE,iBAAO,EAAE,8BAAoB,CAAC,cAAc,CAAC;KAC3D,MAAM,CAAC,MAAM,EAAE,iBAAO,EAAE,8BAAoB,CAAC,cAAc,CAAC,CAAC;AAEhE,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from \"express\";\r\nimport prioritiesController from \"./prioritiesController\";\r\nimport isAdmin from \"../../middlewares/isAdmin\";\r\nimport isLoggedInMiddleware from \"../../middlewares/isLoggedInMiddleware\";\r\n\r\nconst router = Router();\r\n\r\nrouter.use(isLoggedInMiddleware);\r\nrouter.get('/', prioritiesController.getPriorities)\r\n  .get('/:id', prioritiesController.getPriorityById)\r\n  .post('/', isAdmin, prioritiesController.createPriority)\r\n  .patch('/:id', isAdmin, prioritiesController.updatePriority)\r\n  .delete('/:id', isAdmin, prioritiesController.deletePriority);\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e26ae2c9705beb8008c5feace156639e8fb939b4","contentHash":"c7a3e674919201cabc06edb5a6a1b5fdfd51e92955741384b14d277f37c26f73"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\priorities\\prioritiesController.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\priorities\\prioritiesController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":29},"end":{"line":15,"column":77}},"16":{"start":{"line":16,"column":22},"end":{"line":16,"column":72}},"17":{"start":{"line":17,"column":23},"end":{"line":17,"column":74}},"18":{"start":{"line":18,"column":29},"end":{"line":81,"column":1}},"19":{"start":{"line":19,"column":39},"end":{"line":30,"column":6}},"20":{"start":{"line":20,"column":27},"end":{"line":20,"column":77}},"21":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"22":{"start":{"line":22,"column":12},"end":{"line":22,"column":36}},"23":{"start":{"line":24,"column":8},"end":{"line":29,"column":11}},"24":{"start":{"line":31,"column":41},"end":{"line":42,"column":6}},"25":{"start":{"line":32,"column":19},"end":{"line":32,"column":40}},"26":{"start":{"line":33,"column":25},"end":{"line":33,"column":79}},"27":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"28":{"start":{"line":35,"column":12},"end":{"line":35,"column":59}},"29":{"start":{"line":37,"column":8},"end":{"line":41,"column":11}},"30":{"start":{"line":43,"column":40},"end":{"line":54,"column":6}},"31":{"start":{"line":44,"column":38},"end":{"line":44,"column":46}},"32":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"33":{"start":{"line":46,"column":12},"end":{"line":46,"column":61}},"34":{"start":{"line":48,"column":27},"end":{"line":48,"column":95}},"35":{"start":{"line":49,"column":8},"end":{"line":53,"column":11}},"36":{"start":{"line":55,"column":40},"end":{"line":69,"column":6}},"37":{"start":{"line":56,"column":19},"end":{"line":56,"column":40}},"38":{"start":{"line":57,"column":38},"end":{"line":57,"column":46}},"39":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"40":{"start":{"line":59,"column":12},"end":{"line":59,"column":61}},"41":{"start":{"line":61,"column":32},"end":{"line":61,"column":108}},"42":{"start":{"line":62,"column":8},"end":{"line":64,"column":9}},"43":{"start":{"line":63,"column":12},"end":{"line":63,"column":59}},"44":{"start":{"line":65,"column":8},"end":{"line":68,"column":11}},"45":{"start":{"line":70,"column":40},"end":{"line":80,"column":6}},"46":{"start":{"line":71,"column":19},"end":{"line":71,"column":40}},"47":{"start":{"line":72,"column":32},"end":{"line":72,"column":85}},"48":{"start":{"line":73,"column":8},"end":{"line":75,"column":9}},"49":{"start":{"line":74,"column":12},"end":{"line":74,"column":59}},"50":{"start":{"line":76,"column":8},"end":{"line":79,"column":11}},"51":{"start":{"line":82,"column":0},"end":{"line":82,"column":39}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":19},"end":{"line":19,"column":20}},"loc":{"start":{"line":19,"column":39},"end":{"line":30,"column":6}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":73},"end":{"line":19,"column":74}},"loc":{"start":{"line":19,"column":86},"end":{"line":30,"column":5}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":31,"column":21},"end":{"line":31,"column":22}},"loc":{"start":{"line":31,"column":41},"end":{"line":42,"column":6}},"line":31},"11":{"name":"(anonymous_11)","decl":{"start":{"line":31,"column":75},"end":{"line":31,"column":76}},"loc":{"start":{"line":31,"column":88},"end":{"line":42,"column":5}},"line":31},"12":{"name":"(anonymous_12)","decl":{"start":{"line":43,"column":20},"end":{"line":43,"column":21}},"loc":{"start":{"line":43,"column":40},"end":{"line":54,"column":6}},"line":43},"13":{"name":"(anonymous_13)","decl":{"start":{"line":43,"column":74},"end":{"line":43,"column":75}},"loc":{"start":{"line":43,"column":87},"end":{"line":54,"column":5}},"line":43},"14":{"name":"(anonymous_14)","decl":{"start":{"line":55,"column":20},"end":{"line":55,"column":21}},"loc":{"start":{"line":55,"column":40},"end":{"line":69,"column":6}},"line":55},"15":{"name":"(anonymous_15)","decl":{"start":{"line":55,"column":74},"end":{"line":55,"column":75}},"loc":{"start":{"line":55,"column":87},"end":{"line":69,"column":5}},"line":55},"16":{"name":"(anonymous_16)","decl":{"start":{"line":70,"column":20},"end":{"line":70,"column":21}},"loc":{"start":{"line":70,"column":40},"end":{"line":80,"column":6}},"line":70},"17":{"name":"(anonymous_17)","decl":{"start":{"line":70,"column":74},"end":{"line":70,"column":75}},"loc":{"start":{"line":70,"column":87},"end":{"line":80,"column":5}},"line":70}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},{"start":{"line":21,"column":8},"end":{"line":23,"column":9}}],"line":21},"9":{"loc":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},{"start":{"line":34,"column":8},"end":{"line":36,"column":9}}],"line":34},"10":{"loc":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},{"start":{"line":45,"column":8},"end":{"line":47,"column":9}}],"line":45},"11":{"loc":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},{"start":{"line":58,"column":8},"end":{"line":60,"column":9}}],"line":58},"12":{"loc":{"start":{"line":62,"column":8},"end":{"line":64,"column":9}},"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":64,"column":9}},{"start":{"line":62,"column":8},"end":{"line":64,"column":9}}],"line":62},"13":{"loc":{"start":{"line":73,"column":8},"end":{"line":75,"column":9}},"type":"if","locations":[{"start":{"line":73,"column":8},"end":{"line":75,"column":9}},{"start":{"line":73,"column":8},"end":{"line":75,"column":9}}],"line":73}},"s":{"0":1,"1":2,"2":0,"3":2,"4":2,"5":2,"6":0,"7":0,"8":0,"9":0,"10":4,"11":2,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":1,"24":1,"25":1,"26":1,"27":1,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1},"f":{"0":2,"1":2,"2":0,"3":2,"4":2,"5":0,"6":4,"7":3,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2],"3":[2,2],"4":[2,2],"5":[1,1,1],"6":[3,0],"7":[3,3],"8":[0,1],"9":[0,1],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/priorities/prioritiesController.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/priorities/prioritiesController.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport prioritiesServices from './prioritiesServices';\r\nimport CustomError from '../helpers/CustomError';\r\nimport errorFactory from '../helpers/errorFactory';\r\n\r\nconst prioritiesController = {\r\n  getPriorities: async (req: Request, res: Response, next:NextFunction) => {\r\n    const priorities = await prioritiesServices.getPriorities();\r\n    if (priorities instanceof CustomError) {\r\n      return next(priorities);\r\n      \r\n    }\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'All priorities',\r\n      priorities,\r\n      countOfPriorities: priorities.length\r\n    })\r\n  },\r\n  getPriorityById: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id)\r\n    const priority = await prioritiesServices.getPriorityById(id);\r\n\r\n    if (!priority) {\r\n      return next(errorFactory.notFound());\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Priority',\r\n      priority,\r\n    });\r\n  },\r\n  createPriority: async (req: Request, res: Response, next:NextFunction) => {\r\n    const { name, description } = req.body;\r\n  \r\n    if (!name) {\r\n      return next(errorFactory.badRequest());\r\n    }\r\n\r\n    const priorityId = await prioritiesServices.createPriority(name, description)\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Priority created',\r\n      priorityId\r\n    });\r\n  },\r\n  updatePriority: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id);\r\n    const { name, description } = req.body;\r\n\r\n    if (!name) {\r\n      return next(errorFactory.badRequest());\r\n    }\r\n\r\n    const updatedPriority = await prioritiesServices.updatePriority(id, { name, description });\r\n\r\n    if (updatedPriority === 0) {\r\n      return next(errorFactory.notFound());\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Priority updated',\r\n    });\r\n  },\r\n  deletePriority: async (req: Request, res: Response, next:NextFunction) => {\r\n    const id = Number(req.params.id);\r\n    const deletedPriority = await prioritiesServices.deletePriority(id);\r\n\r\n    if (deletedPriority === 0) {\r\n      return next(errorFactory.notFound());\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Priority deleted',\r\n    });\r\n  }\r\n};\r\n\r\nexport default prioritiesController;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"14408c6afa444ade7633a64ce70f3660a7b3dcea","contentHash":"9ea2c64dc68399e613049d8ba8899e4c8d64202bc3d220ebb463d32e50da7a53"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\priorities\\prioritiesServices.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\components\\priorities\\prioritiesServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":22},"end":{"line":16,"column":72}},"17":{"start":{"line":17,"column":27},"end":{"line":57,"column":1}},"18":{"start":{"line":18,"column":25},"end":{"line":26,"column":6}},"19":{"start":{"line":19,"column":8},"end":{"line":25,"column":9}},"20":{"start":{"line":20,"column":33},"end":{"line":20,"column":118}},"21":{"start":{"line":21,"column":12},"end":{"line":21,"column":30}},"22":{"start":{"line":24,"column":12},"end":{"line":24,"column":65}},"23":{"start":{"line":27,"column":29},"end":{"line":30,"column":6}},"24":{"start":{"line":28,"column":27},"end":{"line":28,"column":105}},"25":{"start":{"line":29,"column":8},"end":{"line":29,"column":27}},"26":{"start":{"line":31,"column":43},"end":{"line":38,"column":6}},"27":{"start":{"line":32,"column":25},"end":{"line":35,"column":9}},"28":{"start":{"line":36,"column":25},"end":{"line":36,"column":100}},"29":{"start":{"line":37,"column":8},"end":{"line":37,"column":31}},"30":{"start":{"line":39,"column":43},"end":{"line":52,"column":6}},"31":{"start":{"line":40,"column":28},"end":{"line":40,"column":30}},"32":{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},"33":{"start":{"line":42,"column":12},"end":{"line":42,"column":50}},"34":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"35":{"start":{"line":45,"column":12},"end":{"line":45,"column":64}},"36":{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},"37":{"start":{"line":48,"column":12},"end":{"line":48,"column":21}},"38":{"start":{"line":50,"column":25},"end":{"line":50,"column":115}},"39":{"start":{"line":51,"column":8},"end":{"line":51,"column":35}},"40":{"start":{"line":53,"column":28},"end":{"line":56,"column":6}},"41":{"start":{"line":54,"column":25},"end":{"line":54,"column":120}},"42":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"43":{"start":{"line":58,"column":0},"end":{"line":58,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":19},"end":{"line":18,"column":20}},"loc":{"start":{"line":18,"column":25},"end":{"line":26,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":59},"end":{"line":18,"column":60}},"loc":{"start":{"line":18,"column":72},"end":{"line":26,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":27,"column":21},"end":{"line":27,"column":22}},"loc":{"start":{"line":27,"column":29},"end":{"line":30,"column":6}},"line":27},"11":{"name":"(anonymous_11)","decl":{"start":{"line":27,"column":63},"end":{"line":27,"column":64}},"loc":{"start":{"line":27,"column":76},"end":{"line":30,"column":5}},"line":27},"12":{"name":"(anonymous_12)","decl":{"start":{"line":31,"column":20},"end":{"line":31,"column":21}},"loc":{"start":{"line":31,"column":43},"end":{"line":38,"column":6}},"line":31},"13":{"name":"(anonymous_13)","decl":{"start":{"line":31,"column":77},"end":{"line":31,"column":78}},"loc":{"start":{"line":31,"column":90},"end":{"line":38,"column":5}},"line":31},"14":{"name":"(anonymous_14)","decl":{"start":{"line":39,"column":20},"end":{"line":39,"column":21}},"loc":{"start":{"line":39,"column":43},"end":{"line":52,"column":6}},"line":39},"15":{"name":"(anonymous_15)","decl":{"start":{"line":39,"column":77},"end":{"line":39,"column":78}},"loc":{"start":{"line":39,"column":90},"end":{"line":52,"column":5}},"line":39},"16":{"name":"(anonymous_16)","decl":{"start":{"line":53,"column":20},"end":{"line":53,"column":21}},"loc":{"start":{"line":53,"column":28},"end":{"line":56,"column":6}},"line":53},"17":{"name":"(anonymous_17)","decl":{"start":{"line":53,"column":62},"end":{"line":53,"column":63}},"loc":{"start":{"line":53,"column":75},"end":{"line":56,"column":5}},"line":53}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},{"start":{"line":41,"column":8},"end":{"line":43,"column":9}}],"line":41},"9":{"loc":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},{"start":{"line":44,"column":8},"end":{"line":46,"column":9}}],"line":44},"10":{"loc":{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},{"start":{"line":47,"column":8},"end":{"line":49,"column":9}}],"line":47}},"s":{"0":1,"1":2,"2":0,"3":2,"4":2,"5":2,"6":0,"7":0,"8":0,"9":0,"10":4,"11":2,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":1,"24":1,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1},"f":{"0":2,"1":2,"2":0,"3":2,"4":2,"5":0,"6":4,"7":2,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2],"3":[2,2],"4":[2,2],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0],"9":[0,0],"10":[0,0]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/priorities/prioritiesServices.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/components/priorities/prioritiesServices.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,8DAAsC;AAEtC,yEAAiD;AAEjD,MAAM,kBAAkB,GAAG;IACzB,aAAa,EAAE,GAA8C,EAAE;QAC7D,IAAI;YACF,MAAM,CAAC,UAAU,CAAC,GAAiC,MAAM,kBAAQ,CAAC,KAAK,CAAC,qDAAqD,CAAC,CAAC;YAC/H,OAAO,UAAU,CAAC;SACnB;QAAC,OAAO,KAAU,EAAE;YACnB,OAAO,IAAI,qBAAW,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;SAC5C;IACH,CAAC,CAAA;IACD,eAAe,EAAE,CAAO,EAAU,EAAsB,EAAE;QACxD,MAAM,CAAC,QAAQ,CAAC,GAAiC,MAAM,kBAAQ,CAAC,KAAK,CAAC,wCAAwC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACtH,OAAO,QAAQ,CAAC,CAAC,CAAC,CAAC;IACrB,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,IAAY,EAAE,WAAoB,EAAE,EAAE;QAC3D,MAAM,QAAQ,GAAG;YACf,IAAI;YACJ,WAAW;SACZ,CAAA;QACD,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAQ,CAAC,KAAK,CAAC,+BAA+B,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;QACrH,OAAO,MAAM,CAAC,QAAQ,CAAC;IACzB,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,EAAU,EAAE,aAAyC,EAAE,EAAE;QAC9E,MAAM,WAAW,GAA2C,EAAE,CAAC;QAE/D,IAAI,aAAa,CAAC,IAAI,KAAK,SAAS,EAAE;YACpC,WAAW,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC;SACvC;QACD,IAAI,aAAa,CAAC,WAAW,KAAK,SAAS,EAAE;YAC3C,WAAW,CAAC,WAAW,GAAG,aAAa,CAAC,WAAW,CAAC;SACrD;QAED,IAAI,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;YACzC,OAAO,CAAC,CAAC;SACV;QAED,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAQ,CAAC,KAAK,CAAC,uCAAuC,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC;QAEpI,OAAO,MAAM,CAAC,YAAY,CAAC;IAC7B,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,EAAU,EAAE,EAAE;QACnC,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAQ,CAAC,KAAK,CAAC,yDAAyD,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACzI,OAAO,MAAM,CAAC,YAAY,CAAC;IAC7B,CAAC,CAAA;CACF,CAAC;AAEF,kBAAe,kBAAkB,CAAC","sourcesContent":["import IPriority from './prioritiesModels';\r\nimport database from '../../database';\r\nimport { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport CustomError from '../helpers/CustomError';\r\n\r\nconst prioritiesServices = { \r\n  getPriorities: async (): Promise<IPriority[] | CustomError>  => {\r\n    try {\r\n      const [priorities]: [IPriority[], FieldPacket[]] = await database.query('SELECT * FROM priorities WHERE deletedDate IS NULL;');\r\n      return priorities;\r\n    } catch (error: any) {\r\n      return new CustomError(error.message, 500);\r\n    }\r\n  },\r\n  getPriorityById: async (id: number): Promise<IPriority> => {\r\n    const [priority]: [IPriority[], FieldPacket[]] = await database.query('SELECT * FROM priorities WHERE id = ?;', [id]);  \r\n    return priority[0];\r\n  },\r\n  createPriority: async (name: string, description?: string) => {\r\n    const priority = {\r\n      name,\r\n      description,\r\n    }\r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await database.query('INSERT INTO priorities SET ?;', [priority]);\r\n    return result.insertId;\r\n  },\r\n  updatePriority: async (id: number, updatedFields: { [name: string]: string }) => {\r\n    const validFields: { [name: string]: string | undefined } = {};\r\n    \r\n    if (updatedFields.name !== undefined) {\r\n      validFields.name = updatedFields.name;\r\n    }\r\n    if (updatedFields.description !== undefined) {\r\n      validFields.description = updatedFields.description;\r\n    }\r\n\r\n    if (Object.keys(validFields).length === 0) {\r\n      return 0;\r\n    }\r\n  \r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await database.query('UPDATE priorities SET ? WHERE id = ?;', [validFields, id]);\r\n  \r\n    return result.affectedRows;\r\n  },\r\n  deletePriority: async (id: number) => {\r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await database.query('UPDATE priorities SET deletedDate = NOw() WHERE id = ?;', [id]);\r\n    return result.affectedRows;\r\n  }\r\n};\r\n\r\nexport default prioritiesServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"32f5d29689c8cd85a39bed9bebd0fb7a097cac65","contentHash":"590f5ebe05cfedf539ed40342691bb7792fb2c56b89fb756ee1362c494d0eed4"}}