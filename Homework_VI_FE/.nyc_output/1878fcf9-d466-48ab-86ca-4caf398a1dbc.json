{"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\createTestDatabase.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\createTestDatabase.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":17},"end":{"line":15,"column":51}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":47}},"17":{"start":{"line":17,"column":13},"end":{"line":17,"column":43}},"18":{"start":{"line":18,"column":17},"end":{"line":18,"column":53}},"19":{"start":{"line":19,"column":17},"end":{"line":19,"column":41}},"20":{"start":{"line":20,"column":20},"end":{"line":20,"column":69}},"21":{"start":{"line":21,"column":19},"end":{"line":21,"column":77}},"22":{"start":{"line":22,"column":11},"end":{"line":22,"column":64}},"23":{"start":{"line":23,"column":19},"end":{"line":23,"column":45}},"24":{"start":{"line":25,"column":4},"end":{"line":32,"column":7}},"25":{"start":{"line":26,"column":8},"end":{"line":31,"column":9}},"26":{"start":{"line":27,"column":12},"end":{"line":27,"column":32}},"27":{"start":{"line":30,"column":12},"end":{"line":30,"column":40}},"28":{"start":{"line":35,"column":4},"end":{"line":53,"column":7}},"29":{"start":{"line":36,"column":8},"end":{"line":52,"column":9}},"30":{"start":{"line":37,"column":12},"end":{"line":37,"column":40}},"31":{"start":{"line":38,"column":12},"end":{"line":42,"column":13}},"32":{"start":{"line":39,"column":16},"end":{"line":41,"column":17}},"33":{"start":{"line":40,"column":20},"end":{"line":40,"column":46}},"34":{"start":{"line":43,"column":12},"end":{"line":43,"column":30}},"35":{"start":{"line":44,"column":12},"end":{"line":44,"column":56}},"36":{"start":{"line":47,"column":12},"end":{"line":47,"column":31}},"37":{"start":{"line":48,"column":12},"end":{"line":48,"column":32}},"38":{"start":{"line":51,"column":12},"end":{"line":51,"column":27}},"39":{"start":{"line":55,"column":0},"end":{"line":55,"column":6}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"runQuery","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":17}},"loc":{"start":{"line":24,"column":23},"end":{"line":33,"column":1}},"line":24},"9":{"name":"(anonymous_9)","decl":{"start":{"line":25,"column":43},"end":{"line":25,"column":44}},"loc":{"start":{"line":25,"column":56},"end":{"line":32,"column":5}},"line":25},"10":{"name":"run","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":12}},"loc":{"start":{"line":34,"column":15},"end":{"line":54,"column":1}},"line":34},"11":{"name":"(anonymous_11)","decl":{"start":{"line":35,"column":43},"end":{"line":35,"column":44}},"loc":{"start":{"line":35,"column":56},"end":{"line":53,"column":5}},"line":35}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":39,"column":16},"end":{"line":41,"column":17}},"type":"if","locations":[{"start":{"line":39,"column":16},"end":{"line":41,"column":17}},{"start":{"line":39,"column":16},"end":{"line":41,"column":17}}],"line":39}},"s":{"0":1,"1":35,"2":0,"3":17,"4":35,"5":35,"6":0,"7":0,"8":0,"9":0,"10":52,"11":17,"12":1,"13":4,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":16,"25":16,"26":16,"27":0,"28":1,"29":1,"30":1,"31":1,"32":17,"33":16,"34":1,"35":1,"36":0,"37":0,"38":1,"39":1},"f":{"0":17,"1":35,"2":0,"3":17,"4":35,"5":0,"6":52,"7":4,"8":16,"9":16,"10":1,"11":1},"b":{"0":[1,1,1],"1":[35,0],"2":[17,17],"3":[17,35],"4":[17,17],"5":[1,1,1],"6":[1,3],"7":[4,4],"8":[16,1]},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/createTestDatabase.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/createTestDatabase.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,oDAA4B;AAC5B,gDAAwB;AACxB,4CAAoB;AACpB,sDAA8B;AAE9B,MAAM,QAAQ,GAAG,gBAAM,CAAC,EAAE,CAAC,IAAI,CAAC;AAEhC,MAAM,WAAW,GAAG,cAAI,CAAC,IAAI,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAC;AAC5D,MAAM,UAAU,GAAG,YAAE,CAAC,YAAY,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC,QAAQ,EAAE,CAAC;AACpE,MAAM,EAAE,GAAG,gBAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAE,CAAC;AAEvD,MAAM,UAAU,GAAG,UAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AAE9C,SAAe,QAAQ,CAAC,GAAW;;QACjC,IAAI;YACF,MAAM,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;SACrB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;SAC7B;IACH,CAAC;CAAA;AAED,SAAe,GAAG;;QAChB,IAAI;YACF,MAAM,EAAE,CAAC,gBAAgB,EAAE,CAAC;YAC5B,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE;gBAClC,IAAI,SAAS,CAAC,IAAI,EAAE,CAAC,MAAM,GAAG,CAAC,EAAE;oBAC/B,MAAM,QAAQ,CAAC,SAAS,CAAC,CAAC;iBAC3B;aACF;YACD,MAAM,EAAE,CAAC,MAAM,EAAE,CAAC;YAClB,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;SAC7C;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC;SACrB;gBAAS;YACR,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC;SAChB;IACH,CAAC;CAAA;AAED,GAAG,EAAE,CAAC","sourcesContent":["import mysql2 from 'mysql2';\r\nimport path from 'path';\r\nimport fs from 'fs';\r\nimport config from './config';\r\n\r\nconst dbConfig = config.db.test;\r\n\r\nconst sqlFilePath = path.join(__dirname, '../sql/test.sql');\r\nconst sqlContent = fs.readFileSync(sqlFilePath, 'utf-8').toString();\r\nconst db = mysql2.createConnection(dbConfig).promise();\r\n\r\nconst statements = sqlContent.split(/;\\s*$/m);\r\n\r\nasync function runQuery(sql: string) {\r\n  try {\r\n    await db.query(sql);\r\n  } catch (error) {\r\n    console.log('Error', error);\r\n  }\r\n}\r\n\r\nasync function run() {\r\n  try {\r\n    await db.beginTransaction();\r\n    for (const statement of statements) {\r\n      if (statement.trim().length > 0) {\r\n        await runQuery(statement);\r\n      }\r\n    }\r\n    await db.commit();\r\n    console.log('Database created and seeded.');\r\n  } catch (error) {\r\n    console.log(error);\r\n    await db.rollback();\r\n  } finally {\r\n    await db.end();\r\n  }\r\n}\r\n\r\nrun();"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6dba1d437af543b5f4ad89c29d7632a8006539e5","contentHash":"fe2032c7e3defc73a999424af5afd80bfa149c9077090bdb4c68468dad77e472"},"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\config.ts":{"path":"F:\\TLÜ\\Teine aasta\\Programmeerimine_II\\Tiina_Onemar_Programmeerimine_II\\Homework\\Homework_VI\\src\\config.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":15},"end":{"line":22,"column":1}},"2":{"start":{"line":23,"column":0},"end":{"line":23,"column":25}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/config.ts","sources":["F:/TLÜ/Teine aasta/Programmeerimine_II/Tiina_Onemar_Programmeerimine_II/Homework/Homework_VI/src/config.ts"],"names":[],"mappings":";;AAAA,MAAM,MAAM,GAAG;IACb,IAAI,EAAE,IAAI;IACV,SAAS,EAAE,aAAa;IACxB,YAAY,EAAE,IAAI;IAClB,UAAU,EAAE,EAAE;IACd,EAAE,EAAE;QACF,GAAG,EAAE;YACH,IAAI,EAAE,WAAW;YACjB,IAAI,EAAE,MAAM;YACZ,QAAQ,EAAE,cAAc;YACxB,QAAQ,EAAE,OAAO;SAClB;QACD,IAAI,EAAE;YACJ,IAAI,EAAE,WAAW;YACjB,IAAI,EAAE,MAAM;YACZ,QAAQ,EAAE,cAAc;YACxB,QAAQ,EAAE,QAAQ;SACnB;KACF;CACF,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["const config = {\r\n  port: 3000,\r\n  jwtSecret: 'placeholder',\r\n  jwtExpiresIn: '1h',\r\n  saltRounds: 10,\r\n  db: {\r\n    dev: {\r\n      host: 'localhost',\r\n      user: 'root',\r\n      password: 'my-secret-pw',\r\n      database: 'tasks',\r\n    },\r\n    test: {\r\n      host: 'localhost',\r\n      user: 'root',\r\n      password: 'my-secret-pw',\r\n      database: 'testDB',\r\n    },\r\n  },\r\n};\r\n\r\nexport default config;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6c1d78b081d0facfb592b5ef5ac67119ee370cc8","contentHash":"ece4b67a1ff0c65de4a229761bcab25397462f180c309db5fd04c50af0a03f1f"}}